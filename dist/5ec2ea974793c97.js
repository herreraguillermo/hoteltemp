"use strict";
!(function(s){var e=s.prototype;function a(e,t){t=t||2;return("000"+e).slice(-1*t)}s.clearTime=function(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},e.clearTime=function(){return s.clearTime(this),this},s.today=function(){return s.clearTime(new Date)},s.compare=function(e,t){return e<t?-1:t<e?1:0},e.compare=function(e){return s.compare(this,e)},s.equals=function(e,t){return 0===s.compare(e,t)},e.equals=function(e){return s.equals(this,e)},s.dayDiff=function(e,t){return Math.floor((t.getTime()-6e4*t.getTimezoneOffset())/864e5)-Math.floor((e.getTime()-6e4*e.getTimezoneOffset())/864e5)},e.dayDiff=function(e){return s.dayDiff(this,e)},s.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},e.isLeapYear=function(){return s.isLeapYear(this.getFullYear())},s.getDaysInMonth=function(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()},e.getDaysInMonth=function(){return s.getDaysInMonth(this.getFullYear(),this.getMonth())},s.clone=function(e){return new Date(e.getTime())},e.clone=function(){return s.clone(this)},s.between=function(e,t,n){return e.getTime()>=t.getTime()&&e.getTime()<=n.getTime()},e.between=function(e,t){return s.between(this,e,t)},s.isAfter=function(e,t){return 1===s.compare(e,t)},e.isAfter=function(e){return s.isAfter(this,e)},s.isBefore=function(e,t){return-1===s.compare(e,t)},e.isBefore=function(e){return s.isBefore(this,e)},s.isToday=function(e,t){e=s.clearTime(s.clone(e)),t=s.clearTime(void 0===t?new Date:s.clone(t));return s.equals(e,t)},e.isToday=function(e){return s.isToday(this,e)},s.dayAdd=function(e,t){return e.setDate(e.getDate()+t),e},e.dayAdd=function(e){return s.dayAdd(this,e),this},s.monthAdd=function(e,t){var n=e.getDate();return e.setMonth(e.getMonth()+t),e.getDate()<n&&e.setDate(0),e},e.monthAdd=function(e){return s.monthAdd(this,e),this},s.getElapsed=function(e,t){return(t||new Date)-e},e.getElapsed=function(e){return s.getElapsed(this,e)},s.print=function(t,e){var n=s.locale;return e&&1===e.length?s.print(t,n.format[{d:"short",D:"long",F:"full",m:"monthDay",M:"medium",y:"yearMonth"}[e]]):e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(e){case"hh":return a(t.getHours()<13?0===t.getHours()?12:t.getHours():t.getHours()-12);case"h":return t.getHours()<13?0===t.getHours()?12:t.getHours():t.getHours()-12;case"HH":return a(t.getHours());case"H":return t.getHours();case"mm":return a(t.getMinutes());case"m":return t.getMinutes();case"ss":return a(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return a(t.getFullYear(),4);case"yy":return a(t.getFullYear());case"dddd":return n.days[t.getDay()];case"ddd":return n.daysAbbr[t.getDay()];case"dd":return a(t.getDate());case"d":return t.getDate();case"MMMM":return n.months[t.getMonth()];case"MMM":return n.monthsAbbr[t.getMonth()];case"MM":return a(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return(t.getHours()<12?n.am:n.pm).substring(0,1);case"tt":return t.getHours()<12?n.am:n.pm;default:return e}}):t.toString()},e.print=function(e){return s.print(this,e)},e.format=function(){return s.print(this,"d")},e.iso=function(){return s.print(this,"yyyy-MM-dd")},s.parsels=function(e){var t=null;return"string"==typeof e&&2<e.length&&((t=e.match(/^([12][0-9]{3})[\-]([01]?[0-9])[\-]([0-3]?[0-9])$/))?(t=new Date(t[1],t[2]-1,t[3]),isNaN(t)&&(t=null)):t=(function(e){var t,n,a,r,i,e=e.replace(/\s/g,"").replace(/[^0-9]+$/,"").replace(/^[^0-9]+/,"").replace(/[\-.]/g,"/"),o=null;if(e.match(/^[0-9][0-9\/]+[0-9]$/)){for(t=s.locale.order.split(""),n=0;n<3;n+=1)switch(t[n]){case"d":a=n;break;case"m":r=n;break;case"y":i=n}o=(function(e,t,n,a){var r,i=s.today(),o=!1;if(-1!==e.indexOf("/")?r=e.split("/"):3<(r=e.match(/[0-9]{1,2}/g)).length&&(r[a]+=r[a+1],r.splice(a,1)),r.length<2)return null;if(r=r.map(function(e){return 0|e}),isNaN(r[a])||(r[a]<1e3&&(r[a]+=r[a]<50?2e3:1900),i.setFullYear(r[a]),o=!0),r[n]<1)return null;if(12<r[n]){if(!(r[t]&&r[t]<=12))return null;e=n,n=t,t=e}return--r[n],i.setDate(1),i.setMonth(r[n]),r[t]<1||r[t]>i.getDaysInMonth()?null:(i.setDate(r[t]),!o&&i<s.today()&&i.setFullYear(i.getFullYear()+1),i)})(e,a,r,i)}return o})(e)),t},s.parseIso=function(e){e=e.split("-");return new Date(parseInt(e[0],10),parseInt(e[1],10)-1,parseInt(e[2],10),0,0,0)}})(Date),"undefined"==typeof setImmediate&&(window.setImmediate="undefined"!=typeof msSetImmediate?msSetImmediate:function(e){setTimeout(e,0)});var make={widgets:{}};function Time(e,t){this.HH=0,this.MM=0,e&&(this.HH=e),t&&(this.MM=t)}make.env=(function(e){var t={},n=navigator.userAgent;function a(e){return-1!==n.indexOf(e)}t.mac=a("OS X"),t.trident=a("Trident"),t.chrome=!!a("Chrome")&&parseFloat(n.replace(/^.*Chrome\/(\d+(\.\d+)?).*$/,"$1")),t.webkit=!!a("WebKit")&&parseFloat(n.replace(/^.*WebKit\/(\d+(\.\d+)?).*$/,"$1")),t.android=a("Android"),t.mobile=t.android||a("Mobi")||a("Fennec"),t.touch=void 0!==e.ontouchstart,t.isHost=!1;try{t.isHost=!(null!=e.frameElement||!document.documentElement)}catch(e){}return t})(window),make.js={isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},isNumber:function(e){return"number"==typeof e&&isFinite(e)},extend:function(e,t,n){var a,r=function(){};if(r.prototype=t.prototype,e.prototype=new r,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor===Object.prototype.constructor&&(t.prototype.constructor=t),n)for(a in n)n.hasOwnProperty(a)&&(e.prototype[a]=n[a])},augmentObject:function(e,t,n){var a,r;if(n&&!0!==n)for(a=2;a<arguments.length;a+=1)e[arguments[a]]=t[arguments[a]];else for(r in t)!t.hasOwnProperty(r)||!n&&e.hasOwnProperty(r)||(e[r]=t[r]);return e},augmentProto:function(e,t){for(var n=[e.prototype,t.prototype],a=2,r=arguments.length;a<r;a+=1)n[a]=arguments[a];return make.js.augmentObject.apply(this,n),e}},make.string=(function(){function i(e,t,n){return String.fromCharCode("x"===t?parseInt(n,16):n)}return{revert:function(e){for(var t=e,n=[34,60,62],a=["&quot;","&lt;","&gt;"],r=0;r<3;)t=t.replace(new RegExp(a[r],"g"),String.fromCharCode(n[r])),r+=1;return(t=t.replace(/&#(x?)(\\d+);/g,i)).replace(/&amp;/g,String.fromCharCode(38))},format:function(e){var t=1,n=e,a=arguments.length;if(1<a)for(;t<a;t+=1)n=n.replace(new RegExp("[{]"+(t-1)+"[}]","g"),arguments[t]);return n}}})(),(function(t){var i=/\/?([^\/?#]+)$/i;function o(e){t.js.augmentObject(this,e)}function s(e){return-1===e.indexOf("://")?new URL(location.protocol+"//"+location.host+(e.startsWith("/")?"":"/")+e):new URL(e)}o.prototype.toString=function(){return this.protocol+"://"+this.host+this.relative},t.url={parse:function(e){var t=s(e),n={};if(t.search.length)for(var a,r=t.searchParams.entries();!(a=r.next()).done;)n[a.value[0]]=a.value[1];return new o({source:String(e),protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search.substr(1),queryKey:n,file:(t.pathname.match(i)||[,""])[1]||"index.cfm",hash:t.hash.substr(1),path:e="/"!==(e=t.pathname).charAt(0)?"/"+e:e,relative:t.pathname+t.search})},queryAppend:function(e,t){for(var n,a=s(e),r=new URLSearchParams(t).entries();!(n=r.next()).done;)a.searchParams.set(n.value[0],n.value[1]);return a.pathname+a.search}}})(make),Time.prototype={compareTo:function(e){var t=60*this.HH+this.MM,e=60*e.HH+e.MM;return t<e?-1:e<t?1:0},toString:function(){return(this.HH<10?"0":"")+this.HH+":"+(this.MM<10?"0":"")+this.MM}},Time.parse=function(e){var t=null,n=e.length,a=0;return n&&(n<3?(a=parseInt(e),isNaN(a)||(a<6&&1===n&&(a+=12),(a=24===a?0:a)<23&&(t=new Time(a,0)))):n<=5&&(a=e.match(/^([0-2]?[0-9])[:]?([0-5][0-9])$/))&&(a[1]=0|a[1],a[2]=0|a[2],24===a[1]&&(a[1]=0),a[1]<24)&&(t=new Time(a[1],a[2]))),t},make.$=function(e){return"string"==typeof e?document.getElementById(e):e},make.$$=function(e,t){var n;return void 0!==t?"string"==typeof t?null!==(n=document.getElementById(t))?Array.from(n.querySelectorAll(e)):[]:Array.from(t.querySelectorAll(e)):Array.from(document.querySelectorAll(e))},make.$1=function(e,t){return void 0!==t?null!==(t="string"==typeof t?document.getElementById(t):t)?t.querySelector(e):null:document.querySelector(e)};var dom=(function(t,i){var n=0,a=i.documentElement,e=make.env,s=(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector),{add:function(e,t,n){var a,r=i.createElement(e),e=t||i.body;if(n)for(a in n)r[a]=n[a];return e.appendChild(r),r},remove:function(e){e.parentNode.removeChild(e)},trash:function(e,t){!0!==t&&Behavior.remove(e),s.event.purge(e,!0),e.parentNode.removeChild(e)},getComputedStyle:function(e,t){return e.ownerDocument.defaultView.getComputedStyle(e,null)[t]},getStyle:function(e,t){var t="float"===t?"cssFloat":t,n=e.style[t];return n||(e=e.ownerDocument.defaultView.getComputedStyle(e,null))&&(n=e[t]),n},setStyle:function(e,t,n){e.style["float"===t?"cssFloat":t]=n},getXY:function(e){var t=s.getScrollLeft(),n=s.getScrollTop(),e=e.getBoundingClientRect(),e=[e.left,e.top];return(n||t)&&(e[0]+=t,e[1]+=n),e[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e},getX:function(e){return s.getXY(e)[0]},getY:function(e){return s.getXY(e)[1]},setXY:function(e,t,n){var a=s.getStyle(e,"position"),r=s.setStyle,i=[parseInt(s.getComputedStyle(e,"left")),parseInt(s.getComputedStyle(e,"top"))],o=s.getXY(e);"static"===a&&r(e,"position",a="relative"),isNaN(i[0])&&(i[0]="relative"===a?0:e.offsetLeft),isNaN(i[1])&&(i[1]="relative"===a?0:e.offsetTop),null!==t[0]&&r(e,"left",t[0]-o[0]+i[0]+"px"),null!==t[1]&&r(e,"top",t[1]-o[1]+i[1]+"px"),!n&&(a=s.getXY(e),null!==t[0]&&a[0]!==t[0]||null!==t[1]&&a[1]!==t[1])&&s.setXY(e,t,!0)},generateId:function(e,t){e=e||{};return e&&e.id||(n+=1,e.id=(t||"domgen-")+n),e.id},getDocumentHeight:function(){return Math.max((e.webkit?i.body:a).scrollHeight,s.getViewportHeight())},getDocumentWidth:function(){return Math.max((e.webkit?i.body:a).scrollWidth,s.getViewportWidth())},getViewportHeight:function(){var e=t.innerHeight;return i.compatMode?a.clientHeight:e},getViewportWidth:function(){var e=t.innerWidth;return i.compatMode?a.clientWidth:e},getAncestorBy:function(e,t){for(var n=e;(1!==n.nodeType||!t(n))&&null!==(n=n.parentNode););return n},getScrollLeft:void 0!==t.pageXOffset?function(){return t.pageXOffset}:function(){return Math.max(i.documentElement.scrollLeft,i.body.scrollLeft)},getScrollTop:void 0!==t.pageYOffset?function(){return t.pageYOffset}:function(){return Math.max(i.documentElement.scrollTop,i.body.scrollTop)},getText:function(e){var t,n="",a=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=getText(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[a++];)n+=getText(t);return n}});return s})(window,document),Anim=((function(a){var r={},i=1;function o(e){var t,n="data-uid";return e.getAttribute?(t=e.getAttribute(n))||(i+=1,e.setAttribute(n,i),t=i):e===window?t=0:e===document&&(t=-1),t}a.dataCache=function(e){return e?r[o(e)]:r},a.data=function(e,t,n){e=o(e);return r[e]||(r[e]={}),t?(void 0!==n&&(r[e][t]=n),r[e][t]):r[e]},a.dataExists=function(e,t){e=o(e);return void 0!==r[e]&&void 0!==r[e][t]},a.dataSet=function(e,t,n){return a.dataExists(e,t)?a.data(e,t):a.data(e,t,n)},a.dataClear=function(e,t){var n=o(e);r[n]&&(t?(delete r[n][t],Object.keys(r[n]).length||a.dataClear(e)):delete r[n])}})(dom),dom.event=(function(d,l,i){var p,c=0,u="dom-events",o="dom-delegates",s=d.documentElement,n=i.env,a=void 0!==window.PointerEvent,r=function(e){return e},m=(a||void 0===window.MSPointerEvent||(a=!0,r=function(e){e=e.substr(7);return"MSPointer"+e[0].toUpperCase()+e.substr(1)}),{pointerdown:"touchstart",pointerup:"touchend",pointermove:"touchmove",pointercancel:"touchcancel"}),f={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"};function h(e){var t=e;return(t="pointer"===e.substr(0,7)?a?r(e):(n.touch&&n.mobile?m:f)[e]:t)||e}function v(e,t){var n=l.data(this,o)[t];if(n)for(var a=n.length-1,r=p.getTarget(e);0<=a;){var i=(function e(t,n,a){return!(!t||t===a)&&(t.matches(n)?t:e(t.parentNode,n,a))})(r,n[a][0],this);if(i&&!1===n[a][1].apply(i,[e]))return p.preventDefault(e),!1;--a}return!0}function g(t,n,a,r,e){var i,o=l.dataSet(t,u,{});if(o[n]||(o[n]={}),a.guid||(c+=1,a.guid=c),i=e?!0===e?r:e:t,!o[n][a.guid]){var s=function(e){return a.call(i,e||window.event,r)};o[n][a.guid]=[t,n,a,s,i,r,e];try{t.addEventListener(h(n),s,!1)}catch(e){y(t,n,a)}}}function y(e,t,n){if(n&&n.call){var a=l.data(e,u);if(a&&a[t]){var r=a[t][n.guid];if(r){try{e.removeEventListener(h(t),r[3],!1)}catch(e){}delete a[t][n.guid],Object.keys(a[t]).length||(delete a[t],Object.keys(a).length)||l.dataClear(e,u)}}}else p.purge(e,!1,t)}function b(e){try{return void 0!==e.length&&isFinite(e.length)&&!e.tagName&&!e.scrollTo&&!e.document}catch(e){}}function k(e,t){var n=e,a=t;return(0<window.pageYOffset?null===d.elementFromPoint(0,window.pageYOffset+window.innerHeight-1):0<window.pageXOffset&&null===d.elementFromPoint(window.pageXOffset+window.innerWidth-1,0))&&(n=e-window.pageXOffset,a=t-window.pageYOffset),d.elementFromPoint(n,a)}return p={add:function(e,t,n,a,r){if("string"==typeof e)g(d.getElementById(e),t,n,a,r);else if(b(e))for(var i=e,o=t,s=n,l=a,c=r,u=0;u<i.length;u++)p.add(i[u],o,s,l,c);else g(e,t,n,a,r)},remove:function(e,t,n){if("string"==typeof e)y(d.getElementById(e),t,n);else if(b(e))for(var a=e,r=t,i=n,o=0;o<a.length;o++)p.remove(a[o],r,i);else y(e,t,n)},purge:function(e,t,n){var a,r,i="string"==typeof e?d.getElementById(e):e,o=(function(e,t){var n,a,r,i=null;if(l.dataExists(e,u)&&(n=l.data(e,u)))if(t){if(n[t])for(a in i=[],n[t])n[t].hasOwnProperty(a)&&i.push(n[t][a])}else for(r in i=[],n)for(a in n[r])n[r].hasOwnProperty(a)&&i.push(n[r][a]);return i})(i,n);if(o)for(a=o.length-1;-1<a;--a)y(i,(r=o[a])[1],r[2]);if(t&&i&&i.childNodes)for(a=0;a<i.childNodes.length;a+=1)3!==i.childNodes[a].nodeType&&8!==i.childNodes[a].nodeType&&p.purge(i.childNodes[a],!0,n)},fire:function(e,t,n){var a;d.createEvent?(a=-1!==t.indexOf("mouse")||"click"===t?"MouseEvents":"Events",(a=d.createEvent(a)).initEvent(t,void 0!==n&&n,!0),e.dispatchEvent(a)):e.fireEvent("on"+t)},getTarget:function(e){var t,n=e.target||e.srcElement;switch("t"!==e.type[0]||"touchmove"!==e.type&&"touchend"!==e.type?"p"!==e.type[0]||"pointermove"!==e.type&&"pointerend"!==e.type||"touch"===e.pointerType&&d.elementFromPoint&&null!==(t=k(e.pageX,e.pageY))&&(n=t):(e=e.targetTouches)&&e.length&&d.elementFromPoint&&null!==(t=k(e[0].pageX,e[0].pageY))&&(n=t),n.nodeType){case void 0:return void 0===n.correspondingUseElement?n:n.correspondingUseElement;case 3:return n.parentNode;default:return n}},getPageX:function(e){var t=(e.targetTouches?e.targetTouches[0]:e).pageX;return t||0===t?t:e.clientX||0},getPageY:function(e){var t=(e.targetTouches?e.targetTouches[0]:e).pageY;return t||0===t?t:e.clientY||0},getXY:function(e){return[p.getPageX(e),p.getPageY(e)]},stop:function(e){p.stopPropagation(e),p.preventDefault(e)},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},getCharCode:function(e){return e.keyCode||e.charCode||0},delegate:function(e,t,n,a){var a=i.$(a)||s,r=l.dataSet(a,o,{});r[t]||(r[t]=[],p.add(a,t,v,t)),r[t].push([e,n])},removeDelegate:function(e,t,n,a){var a=i.$(a)||s,r=l.data(a,o)[t];r&&(0<=(e=(function(e,t,n){for(var a=0,r=e.length;a<r;a+=1)if(e[a][0]===t&&e[a][1]===n)return a;return-1})(r,e,n))&&r.splice(e,1),0===r.length)&&(p.remove(a,t,v),delete l.data(a,o)[t])},clearDelegates:function(e){var t,n=i.$(e)||s;for(t in l.data(n,o))p.remove(n,t,v);l.dataClear(n,o)}},i.on=p.add,p})(document,dom,make),(function(n){var a,r=0;dom.css=function(e,t){void 0===a&&(n.head.appendChild(n.createElement("style")),a=n.styleSheets[n.styleSheets.length-1]),a.insertRule(e+"{"+t+"}",r),r+=1}})(document),dom.Color=(function(){var n=parseInt,r=RegExp,i=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,o=/([0-9A-F])/gi;return{toRGB:function(e){var t=e;return i.test(e)||(t=(void 0).toHex(e)),a.exec(t)?"rgb("+[n(r.$1,16),n(r.$2,16),n(r.$3,16)].join(", ")+")":t},toHex:function(e){var t=e;if(i.exec(e)){for(var n=[Number(r.$1).toString(16),Number(r.$2).toString(16),Number(r.$3).toString(16)],a=0;a<n.length;a+=1)n[a].length<2&&(n[a]="0"+n[a]);t=n.join("")}return(t="transparent"!==(t=t.length<6?t.replace(o,"$1$1"):t)&&t.indexOf("#")<0?"#"+e:t).toLowerCase()}}})(),dom.focus=(function(){var n={el:null,set:function(e){var t=!1;if(e||(e=n.el,n.el=null),e&&!e.disabled&&!e.readOnly)try{e.length&&"select-one"!==e.type?e=e[0]:e.select&&e.select(),e.focus&&e.focus(),t=!0}catch(e){}return t}};return n})(),function(e,t,n,a){this.init(e,t,n,a)}),AnimMgr=(Anim.NAME="Anim",Anim.prototype={toString:function(){var e=this.getEl()||{};return this.constructor.NAME+": "+(e.id||e.tagName)},patterns:{offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(e,t,n){var a=AnimMgr.now()-this.getStartTime(),r=this.getDuration();return this.method(r<a?r:a,t,n-t,r)},setAttribute:function(e,t,n){var a=this.getEl();e in a&&!("style"in a&&e in a.style)?a[e]=t:dom.setStyle(a,e,t+n)},getAttribute:function(e){var t,n,a=this.getEl(),r=dom.getStyle(a,e);return"auto"===r||this.patterns.offsetUnit.test(r)?("style"in a?(n=!!(t=this.patterns.offsetAttribute.exec(e)||[])[3],r=t[2]||"absolute"==dom.getStyle(a,"position")&&n?a["offset"+t[0].charAt(0).toUpperCase()+t[0].substr(1)]:0):e in a&&(r=a[e]),r):parseFloat(r)},getDefaultUnit:function(e){return this.patterns.defaultUnit.test(e)?"px":""},setRuntimeAttribute:function(e){var t,n=function(e){return void 0!==e},a=this.attributes;if(this.runtimeAttributes[e]={},!n(a[e].to)&&!n(a[e].by))return!1;if(t=n(a[e].from)?a[e].from:this.getAttribute(e),n(a[e].to))r=a[e].to;else if(n(a[e].by))if(t.constructor==Array)for(var r=[],i=0,o=t.length;i<o;++i)r[i]=t[i]+ +a[e].by[i];else r=t+ +a[e].by;return this.runtimeAttributes[e].start=t,this.runtimeAttributes[e].end=r,this.runtimeAttributes[e].unit=n(a[e].unit)?a[e].unit:this.getDefaultUnit(e),!0},init:function(e,t,n,a){var r=!1,i=0,o=0,s=0;this.attributes=t||{},this.duration=n?Math.ceil(1e3*n):1e3,this.method=a||Easing.easeNone,this.getEl=function(){return e},this.isAnimated=function(){return r},this.setStartTime=function(e){o=(i=e)+s},this.getEndTime=function(){return o},this.getStartTime=function(){return i},this.getDuration=function(){return s},this.runtimeAttributes={},this.animate=function(){return!r&&(s=this.duration,AnimMgr.start(this),!0)},this.stop=function(){r&&AnimMgr.stop(this)},this._onStart=new make.CustomEvent("_start",this),this.onStart=new make.CustomEvent("start",this),this.onTween=new make.CustomEvent("tween",this),this.afterTween=new make.CustomEvent("afterTween",this),this._onTween=new make.CustomEvent("_tween",this),this.onComplete=new make.CustomEvent("complete",this),this._onComplete=new make.CustomEvent("_complete",this),this._onStart.subscribe(function(){for(var e in this.onStart.fire(),this.runtimeAttributes={},this.attributes)this.setRuntimeAttribute(e);r=!0}),this._onTween.subscribe(function(){var e,t;for(e in this.onTween.fire(),t=this.runtimeAttributes)this.setAttribute(e,this.doMethod(e,t[e].start,t[e].end),t[e].unit)}),this._onComplete.subscribe(function(){r=!1,this.onComplete.fire()})}},void 0===window.performance&&(window.performance={now:function(){return(new Date).getTime()}}),(function(){var n,a,t=0,r={},i=0,o="function"==typeof animationStartTime?function(){n=animationStartTime}:"function"==typeof mozAnimationStartTime?function(){n=mozAnimationStartTime}:function(){n=performance.now()};function s(){requestAnimationFrame(e)}function e(){var e,t;for(e in o(),r)(t=r[e])&&t.isAnimated()&&(t._onTween.fire(),n>=t.getEndTime())&&a.stop(t);i&&s()}function l(e){var t=!1;return e&&e.isAnimated()&&(e._onComplete.fire(),delete r[e.gid],--i,t=!t),t}return a={now:function(){return n},start:function(e){i+=1,t+=1,e.id=t,(r[t]=e)._onStart.fire(),o(),e.setStartTime(n),s()},stop:function(e){if(e)return l(e);for(var t in r)l(r[t]);i=0}}})()),ColorAnim=(function(){var r=function(e,t,n,a){r.superclass.constructor.call(this,e,t,n,a)},o=(r.NAME="ColorAnim",r.DEFAULT_BGCOLOR="#fff",make.js.extend(r,Anim),r.superclass),e=r.prototype;return e.patterns.color=/color$/i,e.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,e.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,e.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,e.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/,e.parseColor=function(e){var t;return 3===e.length?e:(t=this.patterns.hex.exec(e))&&4===t.length?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:(t=this.patterns.rgb.exec(e))&&4===t.length?[0|t[1],0|t[2],0|t[3]]:(t=this.patterns.hex3.exec(e))&&4===t.length?[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]:null},e.getAttribute=function(e){var t,n,a=this.getEl();return this.patterns.color.test(e)?(n=dom.getStyle(a,e),(t=this).patterns.transparent.test(n)&&(a=dom.getAncestorBy(a,function(e){return!t.patterns.transparent.test(n)}),n=a?dom.getStyle(a,e):r.DEFAULT_BGCOLOR)):n=o.getAttribute.call(this,e),n},e.doMethod=function(e,t,n){if(this.patterns.color.test(e)){for(var a=[],r=0,i=t.length;r<i;++r)a[r]=o.doMethod.call(this,e,t[r],n[r]);a="rgb("+Math.floor(a[0])+","+Math.floor(a[1])+","+Math.floor(a[2])+")"}else a=o.doMethod.call(this,e,t,n);return a},e.setRuntimeAttribute=function(e){if(o.setRuntimeAttribute.call(this,e),this.patterns.color.test(e)){var t=this.attributes,n=this.parseColor(this.runtimeAttributes[e].start),a=this.parseColor(this.runtimeAttributes[e].end);if(void 0===t[e].to&&void 0!==t[e].by)for(var a=this.parseColor(t[e].by),r=0,i=n.length;r<i;++r)a[r]=n[r]+a[r];this.runtimeAttributes[e].start=n,this.runtimeAttributes[e].end=a}},r})(),Easing={easeNone:function(e,t,n,a){return n*e/a+t},easeIn:function(e,t,n,a){return n*(e/=a)*e+t},easeOut:function(e,t,n,a){return-n*(e/=a)*(e-2)+t},easeBoth:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,a){return n*(e/=a)*e*e*e+t},easeOutStrong:function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(e,t,n,a,r,i){return 0===e?t:1==(e/=a)?t+n:(i=i||.3*a,n=!r||r<Math.abs(n)?(r=n,i/4):i/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*--e)*Math.sin((e*a-n)*(2*Math.PI)/i))+t)},elasticOut:function(e,t,n,a,r,i){var o;return 0===e?t:1==(e/=a)?t+n:(i=i||.3*a,o=!r||r<Math.abs(n)?(r=n,i/4):i/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*e)*Math.sin((e*a-o)*(2*Math.PI)/i)+n+t)},elasticBoth:function(e,t,n,a,r,i){var o;return 0===e?t:2==(e/=a/2)?t+n:(i=i||a*(.3*1.5),o=!r||r<Math.abs(n)?(r=n,i/4):i/(2*Math.PI)*Math.asin(n/r),e<1?r*Math.pow(2,10*--e)*Math.sin((e*a-o)*(2*Math.PI)/i)*-.5+t:r*Math.pow(2,-10*--e)*Math.sin((e*a-o)*(2*Math.PI)/i)*.5+n+t)},backIn:function(e,t,n,a,r){return n*(e/=a)*e*(((r=void 0===r?1.70158:r)+1)*e-r)+t},backOut:function(e,t,n,a,r){return n*((e=e/a-1)*e*(((r=void 0===r?1.70158:r)+1)*e+r)+1)+t},backBoth:function(e,t,n,a,r){return void 0===r&&(r=1.70158),(e/=a/2)<1?n/2*(e*e*((1+(r*=1.525))*e-r))+t:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},bounceIn:function(e,t,n,a){return n-this.bounceOut(a-e,0,n,a)+t},bounceOut:function(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(e,t,n,a){return e<a/2?.5*this.bounceIn(2*e,0,n,a)+t:.5*this.bounceOut(2*e-a,0,n,a)+.5*n+t}},Scroll=(function(){var r=function(e,t,n,a){e&&r.superclass.constructor.call(this,e,t,n,a)},i="scroll",o=(r.NAME=i,make.js.extend(r,ColorAnim),r.superclass),e=r.prototype;return e.doMethod=function(e,t,n){var a,r;return e===i?(a=AnimMgr.now()-this.getStartTime(),r=this.getDuration(),[this.method(a=r<a?r:a,t[0],n[0]-t[0],r),this.method(a,t[1],n[1]-t[1],r)]):o.doMethod.call(this,e,t,n)},e.getAttribute=function(e){var t=this.getEl();return"scroll"===e?[t.scrollLeft,t.scrollTop]:o.getAttribute.call(this,e)},e.setAttribute=function(e,t,n){var a=this.getEl();e===i?(a.scrollLeft=t[0],a.scrollTop=t[1]):o.setAttribute.call(this,e,t,n)},r})();function BehaviorRule(e,t){this.applyRule=e,this.removeRule=t||function(){}}!(function(i,o){var s="olddisplay",l={};function c(e){return"none"===o.getStyle(e,"display")}function u(e){var t,n;void 0===o.data(e,s)&&(t=e.style.display,n=c(e),t&&"none"!==t||!n)&&o.data(e,s,n?t:o.getStyle(e,"display")),e.style.display="none"}function r(e){var t,n,a,r=o.data(e,s);void 0!==r?e.style.display=r:("none"===e.style.display&&(e.style.display=""),""===e.style.display&&c(e)&&(e.style.display=o.data(e,s,(r=e.nodeName,(e=l[r])||(n=(t=document).createElement(r),t.body.appendChild(n),a=window.getDefaultComputedStyle?window.getDefaultComputedStyle(n).display:o.getStyle(n,"display"),t.body.removeChild(n),l[r]=e="none"!==(e=a)&&e?e:"block"),e))))}i.fx={hide:u,show:r,setVisible:function(e,t){(!1===t?u:r)(e)},toggle:function(){for(var e,t=arguments.length;t;)e=i.$(arguments[--t]),("none"===o.getStyle(e,"display")?r:u)(e)},fadeOut:function(e,t,n,a){n=new Anim(e,{opacity:{from:parseFloat(o.getStyle(e,"opacity")),to:n||0}},t||.5,a||Easing.easeOut);return n.onComplete.subscribe(u.bind(null,e)),n.animate(),n},fadeIn:function(e,t,n,a){o.setStyle(e,"opacity",0),r(e);e=new Anim(e,{opacity:{from:0,to:n||1}},t||.75,a||Easing.easeOut);return e.animate(),e},fadeInOut:function(e,t,n,a){var r=new Anim(t,{opacity:{from:parseFloat(o.getStyle(t,"opacity")),to:0}},n||.5,a||Easing.easeOut);return r.onComplete.subscribe(function(e,t,n,a){o.setStyle(e,"opacity",0),o.setStyle(t,"opacity",1),u(t),i.fx.fadeIn(e,n,1,a)}.bind(this,e,t,n,a)),r.animate(),r}}})(make,dom),(function(a){function i(e,t,n,a){var r="_OnSubscribe";this.type=e,this.scope=t||window,this.fireOnce=a,this.fired=!1,this.firedWith=null,this.signature=n||i.LIST,this.subscribers=[],e!==r&&(this.subscribeEvent=new i(r,this))}i.LIST=0,i.FLAT=1,i.prototype={subscribe:function(e,t,n){this.subscribeEvent&&this.subscribeEvent.fire(e,t,n);e=new a.CustomEvent.Subscriber(e,t,n);this.fireOnce&&this.fired?this.notify(e,this.firedWith):this.subscribers.push(e)},unsubscribe:function(e,t){if(!e)return this.unsubscribeAll();for(var n=!1,a=0,r=this.subscribers.length;a<r;a+=1){var i=this.subscribers[a];i&&i.contains(e,t)&&(this._delete(a),n=!0)}return n},fire:function(){var e=this.subscribers.length,t=Array.from(arguments),n=!0;if(this.fireOnce){if(this.fired)return!0;this.firedWith=t}if(this.fired=!0,!e)return!0;for(var a=this.subscribers.slice(),r=0;r<e;r+=1){var i=a[r];if(i&&!1===(n=this.notify(i,t)))break}return!1!==n},notify:function(e,t){var n,a=e.getScope(this.scope);return this.signature===i.FLAT?((n=t.slice(0)).push(e.obj),e.fn.apply(a,n)):e.fn.call(a,this.type,t,e.obj)},unsubscribeAll:function(){for(var e=this.subscribers.length,t=e-1;-1<t;--t)this._delete(t);return this.subscribers=[],e},_delete:function(e){var t=this.subscribers[e];t&&(delete t.fn,delete t.obj),this.subscribers.splice(e,1)}},a.CustomEvent=i})(make),make.CustomEvent.Subscriber=(function(){function e(e,t,n){this.fn=e,this.obj=void 0===t?null:t,this.overrideContext=n}return e.prototype.getScope=function(e){return this.overrideContext?!0===this.overrideContext?this.obj:this.overrideContext:e},e.prototype.contains=function(e,t){return this.fn===e&&(!t||this.obj===t)},e})(),make.CustomEvent.Provider=(function(){function e(){}return e.prototype={evts:null,subs:null,subscribe:function(e,t,n,a){var r;this.evts=this.evts||{},(r=this.evts[e])?r.subscribe(t,n,a):(this.subs=this.subs||{},(r=this.subs)[e]||(r[e]=[]),r[e].push({fn:t,obj:n,overrideContext:a}))},unsubscribe:function(e,t,n){this.evts=this.evts||{};var a=this.evts;if(e)return!!(e=a[e])&&e.unsubscribe(t,n);var r,i=!0;for(r in a)i=i&&a[r].unsubscribe(t,n);return i},unsubscribeAll:function(e){return this.unsubscribe(e)},createEvent:function(e,t){this.evts=this.evts||{};var n,t=t||{},a=this.evts;if(!a[e]){n=new make.CustomEvent(e,t.scope||this,make.CustomEvent.FLAT,t.fireOnce),a[e]=n,t.onSubscribeCallback&&n.subscribeEvent.subscribe(t.onSubscribeCallback),this.subs=this.subs||{};var r=this.subs[e];if(r)for(var i=0;i<r.length;i+=1)n.subscribe(r[i].fn,r[i].obj,r[i].overrideContext)}return a[e]},fireEvent:function(e){this.evts=this.evts||{};var t=this.evts[e];if(!t)return null;for(var n=[],a=1;a<arguments.length;a+=1)n.push(arguments[a]);return t.fire.apply(t,n)},hasEvent:function(e){return!(!this.evts||!this.evts[e])}},e})(),make.queue=(function(){var a={},r="page-init";return{get:function(e){return a[e]},add:function(e,t){t=t||r;a[t]||(a[t]=[]),a[t].push(e)},stack:function(e,t){t=t||r;a[t]||(a[t]=[]),a[t].unshift(e)},parse:function(e){var t=e||r,n=0;if(a[t]){for(;a[t][n];)a[t][n](),n+=1;delete a[t]}},clear:function(e){delete a[e||r]}}})(),make.keys={BACK_SPACE:8,DELETE:46,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,UP:38,DOWN:40},make.modifiers={SHIFT:1,CTRL:2,ALT:4},make.keyboard=(function(){var t={},o=dom.event;function i(e,t,n){this.key=e,this.callback=t,this.modifiers=n||0}function s(e){for(var t,n=l(e.type.substr(3)),a=n.length,r=(e.shiftKey?make.modifiers.SHIFT:0)|(e.ctrlKey||e.metaKey?make.modifiers.CTRL:0)|(e.altKey?make.modifiers.ALT:0);a--;)if((0===(t=n[a]).key||o.getCharCode(e)===t.key)&&t.modifiers===r&&!t.callback.apply(this,[e]))return o.stop(e),!1;return!0}function l(e){return t[e]||(t[e]=[]),t[e]}return{register:function(e,t,n,a){var r=l(e);r.push(new i(t,n,a)),1===r.length&&o.add(document,"key"+e,s)},unregister:function(e,t,n,a){for(var r=l(e),i=r.length;i;)if(r[--i].key===t&&r[i].callback===n&&r[i].modifiers===(a||0)){r.splice(i,1),r.length||o.remove(document,"key"+e,s);break}}}})();var AutoComplete,Behavior=(function(){var t=[],n=[];function a(e,t){for(var n=0,a=e.length;n<a;)e[n].applyRule(t),n+=1}function r(e,t){for(var n=0,a=e.length;n<a;)e[n].removeRule(t),n+=1}return{applyDynamic:function(e){a(n,e)},removeDynamic:function(e){r(n,e)},apply:function(e){a(t,e),a(n,e)},remove:function(e){r(n,e),r(t,e)},addStatic:function(e){t.push(e)},addDynamic:function(e){n.push(e)}}})(),App=(make.form=(function(s,l){var c,a,u="form-err",d=s.keyboard,t=l.event,p=s.fx,e=s.keys;function m(){var e=document.getElementById(u);return p.hide(e),e.className="",t.remove(document,"mousedown",m),d.unregister("down",0,m),!0}function n(e){return!a.stopPost||(a.stopPost=!1)}function r(e){return"checkbox"===e.type||"radio"===e.type}var i=function(e){return e.checked},o=function(e){return e.selected};function f(e,t){return Array.from(e).some(t)}function h(e,t){return Array.from(e).filter(t).map(function(e){return e.value}).join(",")}function v(e,t){e.checked=e.value===t}function g(e,t){e.checked=t}return s.queue.add(function(){d.register("press",e.ENTER,n)}),a={stopPost:!1,selectText:function(e){return e[e.selectedIndex].text},submit:function(e){e.onsubmit&&!e.onsubmit()||e.submit()},addOption:function(e,t,n,a){var r=null,i=document.createElement("option"),o=0;if(i.value=t,i.text=n,a){for(;e.options[o];){if(e.options[o].text>n){r=o;break}o+=1}e.add(i,e.options[r])}else e.add(i,r);return i},has:function(e){if(void 0!==e.length){if(0===e.length)return!1;switch(e[0].tagName){case"INPUT":return f(e,i);case"OPTION":return"select-multiple"===e.type?f(e,o):0!==e.value.length}}if(e.disabled)return!1;switch(e.type){case"text":case"textarea":return 0!==e.value.trim().length;default:return r(e)?e.checked:!!e.value}},get:function(e){if(void 0!==e.length){if(0===e.length)return;switch(e[0].tagName){case"INPUT":return h(e,i);case"OPTION":return"select-multiple"===e.type?h(e,o):e.value}}return!r(e)||e.checked?e.value:void 0},set:function(e,t){var n,a;if(void 0!==e.length){if(0!==e.length)switch(e[0].tagName){case"INPUT":"radio"===e[0].type?Array.from(e).forEach(function(e){v(e,t)}):"checkbox"===e[0].type&&(a=t?t.split(","):[],Array.from(e).forEach(function(e){g(e,-1!==a.indexOf(e.value))}));break;case"OPTION":"select-multiple"===e.type?(a=t?t.split(","):[],Array.from(e).forEach(function(e){e.selected=-1!==a.indexOf(e.value)})):e.value=t}}else"radio"===e.type?v(e,t):"checkbox"===e.type?g(e,!!t):("date"!==e.type&&!s.js.isDate(t)||(n="string"==typeof t?Date.parsels(t):t,t=null!==n?n.format():""),e.value=t)},clear:function(e){a.set(e,"")},error:function(e,t){if(t){var n,a,r,i,o;if(t.length&&"select-one"!==t.type&&(t=t[0]),c=l.getXY(t))return(n=document.getElementById(u)||l.add("div",0,{id:u})).innerHTML='<i class="fa fa-exclamation-circle"></i> '+e,l.focus.set(t),a=c[1],r=n.offsetHeight+100,i=l.getScrollTop(),o=l.getViewportHeight(),i>Math.max(a-r,0)?window.scrollTo(l.getScrollLeft(),Math.max(a-r,0)):i+o<a+r&&window.scrollTo(l.getScrollLeft(),a+r-o),n=null,setImmediate(function(e){var t=document.getElementById(u),n=(p.show(t),t.className="shake",[5,8]);l.setXY(t,[c[0]-(n=!e||e<=20?[20,12]:n)[0],c[1]-t.offsetHeight-n[1]]),s.on(document,"mousedown",m),d.register("down",0,m)}.bind(null,t.offsetWidth)),!1;/INPUT|TEXTAREA|SELECT/.test(t.tagName)&&(l.focus.el=t)}return s.alert(5,e),!1},run:function(e,t){var n;if(!a.stopPost&&s.app.loaded&&arguments.length)try{return"function"==typeof t?(n=[e],2<arguments.length&&(n=n.concat(Array.prototype.slice.call(arguments,2))),t.apply(e,n)):Boolean(t)}catch(e){s.alert(2,e.message)}return!1}}})(make,dom),make.Post=(function(){function t(e){void 0!==e?"string"==typeof e?this.data=new URLSearchParams(e):e instanceof t?this.data=e.data:"FORM"===e.tagName?this.setFormData(e):"object"==typeof e&&this.setData(e):this.data=new URLSearchParams}var e=t.prototype;return e.getData=function(){return this.data},e.setData=function(e){this.data=new URLSearchParams;for(var t=Object.keys(e),n=0;n<t.length;n+=1)this.data.set(t[n],e[t[n]]);return this},e.get=function(e){return this.data.get(e)},e.set=function(e,t){return this.data.set(e,t),this},e.clear=function(){return this.data=new URLSearchParams,this},e.filter=function(){var t=this.toJSON(),e=1===arguments.length?arguments[0].split(","):Array.from(arguments),n=new URLSearchParams;return e.forEach(function(e){null!=t[e]&&n.set(e,t[e])}),this.data=n,this},e.toJSON=function(){var t={},n=this.data;return Array.from(n.keys()).forEach(function(e){t[e]=n.get(e)}),t},e.toString=function(){return this.data.toString()},e.setFormData=function(e){var n=new URLSearchParams;return Array.from(e.elements).filter(function(e){return"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName}).forEach(function(e){var t=null;e.name&&!e.disabled&&("INPUT"===e.tagName?"radio"===e.type||"checkbox"===e.type?e.checked&&(t=e.value):t=e.value.trim():"SELECT"===e.tagName?0<=e.selectedIndex&&(t="select-multiple"===e.type?make.$$("option:checked",e).map(function(e){return e.value}).join(","):e.value):"TEXTAREA"===e.tagName&&(t=e.value.trim())),null!==t&&(n.has(e.name)?n.set(e.name,n.get(e.name)+","+t):n.set(e.name,t))}),this.data=n,this},t})(),(function(e){var t,n={show:function(){t=e.add("div",0,{id:"modal-fix"}),n.show=function(){t.classList.add("open")},n.show()},hide:function(){t.classList.remove("open")},loaded:function(e){e?t.classList.add("loaded"):t.classList.remove("loaded")}};make.lock=n})(dom),(function(i,o){function s(e){this.allowClose=!1,this.ready=!1,this.id=e,this.prev=null,this.next=null,this.onclose=null}function e(){this.count=0,this.top=null}var t=e.prototype,l=0,c=null,u=0,d={},p="modal-open",n=i.env,m=o.event,f=i.lock,h=i.queue,v=!0;function a(){var e=d[c];return!e.ready||!e.allowClose||(i.modal.close(),!1)}function r(e){var t=document.getElementById(c),n=m.getTarget(e);if(2!=(3&t.compareDocumentPosition(n)))return!0;try{t.focus()}catch(e){}return m.stop(e),!1}t.get=function(e){var t=null;return void 0!==e?t=d[e]||null:c&&(t=d[c]),t},t.onClose=function(e,t){e=d[e];null===e.onclose&&(e.onclose=[]),e.onclose.push(t)},t.allowClose=function(e,t){e=d[e];e.allowClose!=t&&(e.allowClose=!!t,document.getElementById(e.id).classList.toggle("noclose"))},t.closeAll=function(){var t=this;Object.keys(d).forEach(function(e){d[e].allowClose&&t.close(e)})};var g=n.mobile||!n.isHost?function(){}:function(e){e?(m.add(window.top,"resize",i.modal.pos),i.keyboard.register("down",27,a),m.add(document,"focusin",r)):(m.remove(window.top,"resize",i.modal.pos),m.remove(document,"focusin",r),i.keyboard.unregister("down",27,a))};function y(a){b(a),n.isHost&&!n.mobile&&setTimeout(function(){var e=!1,t=document.getElementById(a.id),n=t.querySelector("[autofocus]");if(null!==n)try{n.focus(),"function"==typeof n.select&&n.select(),e=!0}catch(e){}e||t.focus()},0),a.ready=!0}function b(e){e=document.getElementById(e.id);e.firstElementChild.offsetHeight+30<o.getViewportHeight()?e.classList.remove("modal-top"):e.classList.add("modal-top")}function k(e){return i.modal.close(c),m.stop(e),!1}t.open=function(e){e.id||(e.id=o.generateId()),d[e.id]?this.close(e.id,!1,!0):v&&(v=!1,m.delegate(".x-close","click",k)),(t=new s(e.id)).allowClose=!0===e.allowClose,e.showClose&&(e.contents='<div class="x-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><ellipse cx="12" cy="12" rx="10" ry="10"/><g transform="translate(7.8,7.8)"><path d="M15.6,12l8.1-8.1c0.5-0.5,0.5-1.2,0-1.7l-1.9-1.9c-0.5-0.5-1.2-0.5-1.7,0L12,8.4L3.9,0.4c-0.5-0.5-1.2-0.5-1.7,0L0.4,2.2c-0.5,0.5-0.5,1.2,0,1.7L8.4,12l-8.1,8.1c-0.5,0.5-0.5,1.2,0,1.7l1.9,1.9c0.5,0.5,1.2,0.5,1.7,0l8.1-8.1l8.1,8.1c0.5,0.5,1.2,0.5,1.7,0l1.9-1.9c0.5-0.5,0.5-1.2,0-1.7L15.6,12z" transform="scale(0.35)"/></g></svg></div>'+e.contents),0<l?(document.getElementById(c).style.display="none",t.prev=d[c],d[c].next=t):(u=o.getScrollTop(),f.show(),f.loaded(!0),a=document.body.offsetWidth,document.body.classList.add(p),a<(n=document.body.offsetWidth)&&(document.body.style.borderRight=n-a+"px solid "+o.getComputedStyle(document.body,"backgroundColor")),g(1)),d[e.id]=t,c=e.id,l+=1,this.count=l,this.top=c,n=o.add("div",0,{id:e.id,className:"modal",tabIndex:0,role:"dialog","aria-hidden":"false"}),t.allowClose||n.classList.add("noclose"),n.innerHTML=(a=e.contents,'<div class="modal-content '+(e.type||"base")+'"><div class="modal-cell">'+a+"</div></div>");var t,n,a,r=this;i.$$("img",n).forEach(function(e){0!==e.height&&null!==e.getAttribute("height")||(e.onload=r.pos)}),e.behavior&&Behavior.apply(n),h.get(t.id)?h.add(y.bind(null,t),t.id):y(t)},t.pos=function(){c&&b(d[c])},t.close=function(e,t,n){var a=e||c,e=d[a];e&&(null!==e.onclose&&(t||e.onclose.forEach(function(e){e(a)}),e.onclose=null),0<--l?e.next?e.prev?(e.prev.next=e.next,e.next.prev=e.prev):e.next.prev=null:(e.prev.next=null,c=e.prev.id,document.getElementById(c).style.display="flex",this.pos()):(f.loaded(!1),g(0),n||f.hide(),document.body.classList.remove(p),document.body.style.borderRightWidth="0",scrollTo(0,u),c=null),this.count=l,this.top=c,o.trash(document.getElementById(a)),o.focus.set(),delete d[a])},i.modal=new e})(make,dom),make.ajax=(function(s){var l,r=s.queue,c=s.modal,u=s.lock,d=null,p=!1,m=[],f=[],h=null,v=null,g={xml:"application/xml",html:"text/html",json:"application/json",plain:"text/plain"},y={type:"html",url:"",data:null,complete:null,error:null,success:null,abort:null};function t(){clearTimeout(d),d=null}function i(e){p&&(null!==d?t():l.onwaitingclose.fire(e)),e||0!==c.count||u.hide()}function b(e){null!==d&&t(),l.onwaiting.fire(e.msg)}function a(e){var t,n,a,r,i,o;h?f.push([e,v]):(h=e.name,u.show(),e.msg?(p=!0,c.count?b(e):d=setTimeout(function(){b(e)},750)):p=!1,t={url:e.url,name:h,type:e.type,modal:!!e.modal,success:k,error:w,complete:_,abort:x},null!==v?(t.method="POST",t.data=v,v=null):t.method="GET",n={options:Object.assign({},y,t),headers:{Accept:g[t.type]+", */*"}},a={method:t.method,headers:{Accept:g[t.type]+", */*","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"},"POST"===t.method&&(a.headers["Content-Type"]="application/x-www-form-urlencoded",a.body=t.data instanceof s.Post?t.data.toString():t.data),r=!1,o=!(i={status:0,responseText:""}),fetch(t.url,a).then(function(e){return i.status=e.status,e.headers.forEach(function(e,t){n.headers[t]=e}),e.ok||304===e.status||(r=!0),"json"!==t.type||r?e.text():e.json()}).then(function(e){if(r)i.responseText=e,w(0,n.options);else try{k(e,n.options,"success")}catch(e){throw o=!0,e}_(0,0,r?"error":"success")}).catch(function(e){o||(i.responseText=e.message,w(0,n.options)),_(0,0,r?"error":"success")}),m[h]=n,l.onrequest.fire(e))}function k(e,t,n){var a=t.name;i(t.modal),t.modal?c.open({id:a,allowClose:!0,showClose:!0,behavior:!0,contents:e}):m[a].data=e,h=null,r.parse(a),l.onresponse.fire(e,t,n)}function w(e,t,n){t.name?o(t.name):t.name=dom.generateId(),i(t.modal),s.dialog.open(lang.lib.ajax_error,{id:t.name,icon:"alert",allowClose:!0,showClose:!0,header:lang.lib.alert.error})}function _(e,t,n){f.length&&"success"===n&&setImmediate(A)}function x(e){o(e.name)}function o(e){r.clear(e),f.length=0,h=null}function A(){var e=f.shift();v=e[1],a(e[0])}function n(e){return m[e]}return l={onrequest:new s.CustomEvent("onrequest"),onwaiting:new s.CustomEvent("onwaiting"),onresponse:new s.CustomEvent("onresponse"),onwaitingclose:new s.CustomEvent("onwaitingclose"),onerror:new s.CustomEvent("onerror"),running:function(){return h},error:function(){w.apply(this,arguments)},queue:function(e,t,n,a){r.add(e.bind.apply(e,[n||window].concat(a)),t)},stack:function(e,t,n,a){r.stack(e.bind.apply(e,[n||window].concat(a)),t)},load:function(e,t,n){a({url:e,name:t,msg:n,modal:!0,type:"html"})},loadHtml:function(e,t,n){a({url:e,name:t,msg:n,modal:!1,type:"html"})},loadJSON:function(e,t,n){a({url:e,name:t,msg:n,type:"json"})},ping:function(e,t,n){a({url:e,name:t,msg:n,type:"plain"})},get:n,getJSON:function(e){return n(e).data},response:function(e){return n(e).data},checkResult:function(e,t){var e=l.response(e),n=1==e.flag;return n?s.notify(1,e.msg):t?s.form.error(e.msg,t):s.alert(e.flag,e.msg),n},post:function(e){return v=new s.Post(e),1<arguments.length&&v.filter.apply(v,Array.from(arguments).slice(1)),v},async:function(e,t,n){var a={method:"GET",type:"json",url:e,success:t||null},e=(null!==v&&(a.method="POST",a.data=v,v=null),void 0!==n&&Object.assign(a,n),void 0!==a.data&&"GET"===a.method&&(a.method="POST"),{method:void 0!==a.method?a.method:"GET",headers:{Accept:g[a.type],"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});a.headers&&Object.assign(e.headers,a.headers),a.data&&(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=a.data instanceof s.Post?a.data.toString():a.data),null!=a.signal&&(e.signal=a.signal),fetch(a.url,e).then(function(e){if(e.ok||304===e.status)return"json"===a.type?e.json():e.text();throw new Error("Request failed: "+e.status)}).then(function(e){a.success&&a.success(e),a.complete&&a.complete()}).catch(function(e){a.error&&a.error(e),a.complete&&a.complete()})}}})(make),(function(e){var n=window.history,a=!1,r=!1,t={pop:new e.CustomEvent("popstate",this,e.CustomEvent.FLAT),back:function(){r||n.back()},replace:function(e,t){r||(a=!0,n.replaceState(e||null,"",t))},push:function(e,t){r||(a=!0,n.pushState(e||null,"",t))}};window.addEventListener("popstate",function(e){a?(r=!0,t.pop.fire(e.state),r=!1):a=!0}),e.history=t})(make),make.valid=(function(r){function i(e,t,n){return(void 0===t||t<=e)&&(void 0===n||e<=n)}function a(e,t,n,a){e="object"==typeof e?r.get(e):e;if(isNaN(e))return!1;if(!e.length)return!1;if(a)e=parseFloat(e);else{if(-1!==e.indexOf("."))return!1;e|=0}return i(e,t,n)}return{numeric:a,number:function(e,t,n){return a(e,t,n,!0)},integer:function(e,t,n){return a(e,t,n,!1)},range:i}})(make.form),(function(l){var i,c,u,d,p,o,m,s=l.env,f=l.fx,h=l.form,v=!1,g=!1,y=!1,b="data-bind",k="data-date",w="data-month",_="click",x=null,A=dom.event,C=Date.locale,E=Date.parsels,e="widg-cal-area",S="rtl"===document.documentElement.dir;function T(){document.getElementById(e).innerHTML=n(x)+n(o),t(0,x),t(1,o)}function F(){if(!g)if((i=this).disabled||i.readOnly)i=null;else{if(d=E(i.value),c=E(i.getAttribute("data-min")),u=E(i.getAttribute("data-max")),d&&(x=d.clone()),i.form&&i.getAttribute(b)&&(a=i.form[i.getAttribute(b)],h.has(a))&&(p=E(a.value),x=x||p),null===x&&(x=new Date).setHours(0,0,0,0),x.setDate(1),o=x.clone().monthAdd(1),!v){var e,t=C.monthsAbbr,n=0,a=(m=dom.add("div",0,{id:"widg-cal"}),S?'<div id="widg-cal-prev">&rsaquo;</div><div id="widg-cal-next">&lsaquo;</div>':'<div id="widg-cal-prev">&lsaquo;</div><div id="widg-cal-next">&rsaquo;</div>');for(m.innerHTML=(a+='<div id="widg-cal-area"></div><div id="widg-cal-month"><div>\t<div class="widg-cal-month-heading" id="widg-cal-month-name"></div>  <table cellspacing="8" class="month">  <tr><td></td><td></td><td></td></tr>  <tr><td></td><td></td><td></td></tr>  <tr><td></td><td></td><td></td></tr>  <tr><td></td><td></td><td></td></tr>  </table>  <div class="widg-cal-btn"><button data-ok="1">OK</button><button>Cancel</button></div></div><div>  <div class="widg-cal-month-heading" id="widg-cal-year"></div>  <table cellspacing="8" class="year">  <tr><td></td><td></td><td></td></tr>  <tr><td></td><td></td><td></td></tr>  <tr><td></td><td></td><td></td></tr>  <tr><td></td><td></td><td></td></tr>  </table>')+(S?'<div class="widg-cal-year-controls"><div id="widg-cal-year-prev">&rsaquo;</div><div id="widg-cal-year-next">&lsaquo;</div></div>':'<div class="widg-cal-year-controls"><div id="widg-cal-year-prev">&lsaquo;</div><div id="widg-cal-year-next">&rsaquo;</div></div>')+"</div></div>",e=l.$$(".month td","widg-cal-month");n<12;n+=1)e[n].innerHTML=t[n],e[n].setAttribute(w,n);v=!0}T(),f.show(m),y&&f.hide(document.getElementById(N));var a=dom.getXY(i),r=m.offsetWidth;a[1]+=i.offsetHeight-1,S?(a[0]+=i.offsetWidth-r,a[0]<0&&(a[0]=10)):a[0]+r+10>window.screen.width&&(a[0]=Math.max(0,window.screen.width-r-10)),dom.setXY(m,a),A.add(document,_,I),l.keyboard.register("down",27,L),A.delegate(".widg-cal-tbl .day",_,O,m),A.delegate(".widg-cal-tbl .month span",_,B,m),S?(A.delegate("#widg-cal-next",_,D,m),A.delegate("#widg-cal-prev",_,M,m)):(A.delegate("#widg-cal-next",_,M,m),A.delegate("#widg-cal-prev",_,D,m));try{s.mobile&&s.touch&&i.blur()}catch(e){}g=!0}}function L(e){g&&(A.remove(document,_,I),l.keyboard.unregister("down",27,L),A.clearDelegates(m),A.clearDelegates(N),f.hide(m),l.js.isDate(e)&&(i.value=e.format(),A.fire(i,"change",!0)),g=!1,o=x=p=i=null)}function O(){L(E(this.getAttribute(k)))}function M(){x.monthAdd(1),o.monthAdd(1),T()}function D(){x.monthAdd(-1),o.monthAdd(-1),T()}function I(e){var t=A.getTarget(e);return!(t!==i&&t!==m&&!m.contains(t)&&(A.stop(e),L(),1))}function t(e,t){for(var n=t.clone(),a=n.getDay(),r=l.$$("td",l.$$(".widg-cal-tbl",m)[e]),i=[],o=1===C.firstDayOfWeek?0===a?6:a-1:a,s=1;s<=t.getDaysInMonth();s+=1,o+=1)i=[],n=new Date(t.getFullYear(),t.getMonth(),s),r[o].innerHTML=n.getDate(),c&&n.isBefore(c)||u&&n.isAfter(u)?i.push("disabled"):(i.push("day"),r[o].setAttribute(k,n.format())),(d&&n.equals(d)||p&&n.equals(p))&&i.push("sel"),p&&d&&(p.isAfter(d)?n.between(d,p)&&i.push("bound"):n.between(p,d)&&i.push("bound")),r[o].className=i.join(" ")}function n(e){for(var t=C.daysShort,n=C.firstDayOfWeek,a=(a='<table class="widg-cal-tbl" cellspacing="0"><thead><tr><th colspan="7" class="month"><span>')+e.print(C.format.yearMonth)+"</span></th></tr><tr>",r=n;r<7;r+=1)a+='<th scope="col">'+t[r]+"</th>";for(1==n&&(a+='<th scope="col">'+t[0]+"</th>"),a+="</tr></thead><tbody>",r=1;r<=6;r++){a+="<tr>";for(var i=1;i<=7;i+=1)a+="<td>&nbsp;</td>";a+="</tr>"}return a+"</tbody></table>"}var N="widg-cal-month",H="widg-cal-month-name",R="widg-cal-year",a=0,r=null;function B(){var e=document.getElementById(N);r=x.clone(),a=r.getFullYear()-4,P(),q(),A.delegate(".month td",_,U,e),A.delegate(".year td",_,J,e),A.delegate("button",_,Y,e),A.delegate("#widg-cal-year-next",_,j,e),A.delegate("#widg-cal-year-prev",_,$,e),e.style.display="flex",dom.setStyle(e,"width",m.offsetWidth+"px"),dom.setStyle(e,"height",m.offsetHeight+"px"),dom.setStyle(e,"top",-m.offsetHeight+"px"),new Anim(e,{top:{by:m.offsetHeight}},.25,Easing.easeOut).animate(),y=!0}function j(){a+=12,q()}function $(){a-=12,q()}function U(){r.setMonth(this.getAttribute(w)),P()}function J(){r.setFullYear(0|this.innerHTML),q()}function Y(){y=!1,A.clearDelegates(N),this.getAttribute("data-ok")&&(x=r.clone(),o=x.clone().monthAdd(1),T()),new Anim(document.getElementById(N),{top:{by:-m.offsetHeight}},.25,Easing.easeOut).animate()}function P(){document.getElementById(H).innerHTML=r.print("MMMM");var e=l.$$(".month .sel",N),t=l.$$(".month td",N);e.length&&(e[0].className=""),t[r.getMonth()].className="sel"}function q(){document.getElementById(R).innerHTML=r.print("yyyy");for(var e=l.$$(".year td",N),t=r.getFullYear(),n=0;n<12;n+=1)e[n].innerHTML=a+n,e[n].className=a+n==t?"sel":""}l.queue.add(function(){A.delegate("input.date",_,F)}),l.datepicker={close:L}})(make),(function(t){var n,a=null;function r(){n.className="open"}function i(){clearTimeout(a),a=null,n.className="",n.style.display=""}make.widgets.notify=function(e){a?i():n=n||t.add("div",null,{id:"make-widget-notify"}),n.innerHTML=e,n.style.display="block",n.className="reset",a=setTimeout(i,3500),setTimeout(r,10)}})(dom),(function(){function t(e){e.value=e.getAttribute("data-selected"),-1===e.selectedIndex&&(e.selectedIndex=0)}Behavior.addDynamic(new BehaviorRule(function(e){make.$$("select[data-selected]",e).forEach(t)}))})(),(function(w,_){w.env;var x,n=0,A="_input",C=0,t="input.cur,input.date,input.dec,input.int,input.time",E="data-bind",a=_.event,S=w.form,r=/\b(?:cur|date|dec|int|time)/,i=/^dec|int|cur$/;function T(e,t){var n,a,r,i=null;return null!==t&&t.length&&("date"===e?i=Date.parsels(t):"cur"===e||"dec"===e?(1<(r=(a=t.replace(/,/,".")).split(".")).length&&(n=r.pop(),a=r.join("")+"."+n),i=parseFloat(a)):"int"===e?i=parseInt(t):"time"===e&&(n=(r=t).replace(/\./,":").replace(/[^0-9:]+/,""),a=0<=r.indexOf("pm"),n.length<3&&(n+=":00"),(e=Time.parse(n))&&a&&e.HH<=12&&(e.HH+=12,24===e.HH)&&(e.HH=0),i=e)),i}function L(e,t){var n,a="";return null!==t&&("date"===e?a=t.format():"int"===e?a=t:"cur"===e?a=t.toFixed(2):"dec"===e?((n=String(t)).indexOf(".")<0&&(n+=".0"),a=n):"time"===e&&(a=String(t))),a}function M(){S.stopPost=!1;var e=_.focus.el;null!==e&&(e.focus(),e.select(),_.focus.el=null)}function D(e,t,n){var a=T(t,e.getAttribute("min")),e=T(t,e.getAttribute("max")),r=null;return"date"===t?a&&n.isBefore(a)?r=a:e&&n.isAfter(e)&&(r=e):null!==a&&n<a?r=a:null!==e&&e<n&&(r=e),r}function o(){var e,t,n,a,r,i,o,s,l,c,u,d,p,m,f,h,v=this,g=_.data(v,A),y=v.value;if(y.length){for(var b=g.type,k=T(b,y);null!==k&&(!g.numeric||!isNaN(k));){if(g.numeric){if(g.prev!==k&&(l=v,c=g,u=k,h=!(f=m=p=d=void 0),isNaN(u)||null!==D(l,c.type,u)?h=!1:l.getAttribute(E)&&(u=u,f=(c=c).type,l=l.form[l.getAttribute(E)])&&(d=T(f,l.value))&&(m=_.data(l,A),c.index<m.index?d<u&&(p=u):u<d&&(p=u),void 0!==p)&&(c=D(l,f,p),l.value=L(f,p=null!==c?c:p),m.prev=p),!h))break;this.value=L(b,k)}else if("date"===b){if(g.prev!==k&&(d=v,u=g,l=!0,(f=k)&&f.getFullYear()<=2100&&1900<=f.getFullYear()&&null===D(d,u.type,f)?d.getAttribute(E)&&(c=d,m=f,s=o=i=r=h=p=void 0,s=(a=u).type,c=c.form[c.getAttribute(E)])&&(r=Date.parsels(c.value))&&(i=h=_.data(c,A),o=0,null!==a.prev&&null!==i.prev&&(o="date"!==a.type?i.prev-a.prev:a.prev.dayDiff(i.prev)),i=Math.abs(o),o=m.dayDiff(r),a.index<h.index?o<0&&(p=m.clone()).dayAdd(i):0<o&&(p=m.clone()).dayAdd(-i),void 0!==p)&&(null!==(r=D(c,s,p))&&(p=r.clone()),c.value=L(s,p),h.prev=p):l=!1,!l))break;this.value=L(b,k),w.datepicker.close()}else"time"===b&&(this.value=L(b,k));return void(g.prev=k)}y=v,e=g,n=450<(t=Date.now())-C,C=t,S.stopPost=!0,y.value=L(e.type,e.prev),null===_.focus.el&&(_.focus.el=y),n?(t={color:{to:_.getStyle(y,"color")}},y.style.color="#fff",t.backgroundColor={to:_.getStyle(y,"backgroundColor")},y.style.backgroundColor="#f00",x&&x.stop(),(x=new ColorAnim(y,t,.35)).onComplete.subscribe(M),x.animate()):setTimeout(M,10)}else g.prev=null}function s(e){var t=e.className.match(r)[0];n+=1,_.data(e,A,{type:t,prev:T(t,e.value),numeric:-1!==t.search(i),index:n}),"date"===t?e.value.length&&(e.value=Date.parsels(e.value).format()):"time"===t&&e.classList.add("timebg"),a.add(e,"change",o)}function l(e){_.dataClear(e,A)}Behavior.addDynamic(new BehaviorRule(function(e){w.$$(t,e).forEach(s)},function(e){w.$$(t,e).forEach(l)})),w.widgets.inputValidate=o,w.input={add:function(e){s(e),o.apply(e)},remove:l}})(make,dom),make.env.mobile||(function(a,r){var i=a.fx,o="tooltip",s="."+o,l="mouseout",c=r.event;function u(){c.removeDelegate(s,l,u),c.remove(document,"click",u),a.keyboard.unregister("down",27,u),i.hide(document.getElementById(o))}c.delegate(s,"mouseover",function(){var e=this,t=document.getElementById(o)||r.add("div",0,{id:o}),n=e.getAttribute("data-title");n&&(c.delegate(s,l,u),c.add(document,"click",u),a.keyboard.register("down",27,u),n=n.replace(/\[(\/?(?:br|strong|i|b|em))\]/g,"<$1>"),t.innerHTML='<div class="inner">'+n+'</div><div class="arrow"></div>',i.show(t),n=r.getXY(e),e.classList.contains("tooltip-right")?(t.className="tooltip-right",r.setXY(t,[n[0]+e.offsetWidth+5,n[1]+(e.offsetHeight/2-t.offsetHeight/2)])):e.classList.contains("tooltip-left")?(t.className="tooltip-left",r.setXY(t,[n[0]-t.offsetWidth-5,n[1]+(e.offsetHeight/2-t.offsetHeight/2)])):(t.className="",r.setXY(t,[n[0]+(e.offsetWidth/2-t.offsetWidth/2),n[1]+e.offsetHeight+3])))})})(make,dom),make.title=(function(t){var e,n=[];function a(e){var t="";return"string"==typeof e?t=e:e.getAttribute&&e.getAttribute("title")?t=e.getAttribute("title"):e.title?t=e.title:e.firstElementChild||(t=e.innerHTML),t}return t.queue.add(function(){e=document.title||""},"boot"),{get:a,set:function(e){e=a(e);return n.push(document.title),e.length&&(document.title=t.string.revert(e)),e},reset:function(){document.title=e,n=[]},pop:function(){var e=n.pop();setTimeout(function(){document.title=e},10)}}})(make),(function(e,n){var a=e.env,r=e.queue,i=!1;e.boot=function(){var t;i||(i=!0,t=[],Object.keys(a).forEach(function(e){"boolean"==typeof a[e]&&!0===a[e]&&t.push(e)}),a.mobile||t.push("mouse"),t.length&&(n.body.className.length?n.body.className+=" "+t.join(" "):n.body.className=t.join(" ")),r.parse("boot"),r.parse("app-init"))}})(make,document),make.dialog=(function(o){function e(e,t,n){this.msg=e,this.sign=t,this.className=n}var r,s=null,l=0,c=o.modal,u={allowClose:!0,header:"Dialog"},t=lang.lib.alert,n=[null,new e(t.success,"check-circle",null),new e(t.error,"exclamation-circle","red"),new e(t.internal,"minus-circle","red"),new e(t.info,"info-circle",null),new e(t.invalid,"warning","yellow")],a="make-modal-loading";function d(){s=null}return r={open:function(e,t){var n,a,r,i=t.id||"make-dialog-"+ ++l;if(o.js.augmentObject(t,u),n='<div class="dlg-head'+(t.headerClass?" "+t.headerClass:"")+'">',t.icon&&t.icon.length&&(n+='<div class="dlg-icon"><span role="presentation" class="fa fa-'+t.icon+'"></span></div><div>'),n+=t.header+'</div></div><div class="dlg-body">'+e,t.append&&(n+=t.append),t.buttons){for(n+='<div class="dlg-btn">',a=0,r=(s=t.buttons).length;a<r;a+=1)n+='<button type="button" onclick="make.dialog.close('+a+')"',0===a&&(n+=" autofocus",1<r)&&(n+=' class="prime"'),n=(n+=">")+s[a].label+"</button>";n+="</div>"}c.open({id:i,allowClose:t.allowClose,contents:n+="</div>",type:"dialog"}),c.onClose(i,d)},close:function(e){var t=c.top;s&&(e=s[e])&&e.callback&&e.callback.apply(e.context||window,e.arguments||[]),c.close(t)},confirm:function(e,t,n,a){r.open(e,{header:lang.lib.confirmation,id:"confirm-dialog",icon:"question-circle",buttons:[{label:lang.ui.continue,callback:t,arguments:n,context:a},{label:lang.ui.close}]})}},o.confirm=function(e){return confirm(e)},o.notify=function(e,t){o.widgets.notify('<div class="msg"><i class="fa fa-'+n[e].sign+'"></i> '+t+"</div>")},o.alert=function(e,t){e=n[e];r.open(t,{id:"make-alert",header:e.msg,headerClass:e.className,icon:e.sign,buttons:[{label:lang.ui.close}]})},o.ajax.onwaiting.subscribe(function(e,t){r.open(t,{id:a,allowClose:!1,icon:"spinner fa-pulse fa-fw",header:lang.lib.working})}),o.ajax.onwaitingclose.subscribe(function(e,t){c.close(a,!0,t[0])}),r})(make),(function(t,n){function e(e){return new n.CustomEvent(e,this,n.CustomEvent.FLAT)}var a={uri:null,query:null,page:null,debug:!1,loaded:!1,events:{scroll:e("scroll"),orientation:e("orientation"),layout:e("layout"),linkbehavior:e("linkbehavior")},nav:function(e,t){return a.loaded&&t&&n.dialog.open(t,{header:lang.lib.please_wait,allowClose:!1}),document.location=e||a.uri,!1}};n.queue.add(function(){var e=document.location.href;a.uri=n.url.parse(e),null!==a.uri.relative.match(/^\/{2,}/)&&(a.uri=n.url.parse(a.uri.protocol+"://"+a.uri.host+a.uri.relative.replace(/^\/{2,}/,"/"))),a.canonical=a.uri.relative,a.query=a.uri.query.replace(/^&(amp;)?/,""),a.page=a.uri.file,a.today=Date.parsels(t.pageData.today)||Date.today(),Behavior.apply(document.body),n.keyboard.register("down",n.keys.ESCAPE,function(){return!1}),n.queue.parse(),a.loaded=!0},"app-init"),n.app=a})(window,make),(function(e){var n=e.env,a=!1,r=e.app.events.scroll,t=!1,i=!1,o=function(){};try{var s=Object.defineProperty({},"passive",{get:function(){i={passive:!0}}});window.addEventListener("test",o,s),window.removeEventListener("test",o,s)}catch(e){}function l(){t||(requestAnimationFrame(c),t=!0)}function c(){r.fire(),t=!1}e.app.scroll={subscribe:function(e,t){r.subscribe(e,t),a||(window.addEventListener("scroll",l,i),n.mobile||window.addEventListener("resize",l),a=!0)},unsubscribe:function(e){r.unsubscribe(e),a&&!r.subscribers.length&&(window.removeEventListener("scroll",l,i),n.mobile||window.removeEventListener("resize",l),a=!1)},fire:l}})(make),"onorientationchange"in window&&(function(e){var t=e.app.events.orientation;e.on(window,"orientationchange",function(){t.fire()}),t.subscribe(e.modal.pos)})(make),make.queue.add(function(){var t=dom.event;t.delegate("a[data-behavior]","click",function(e){return!!(e.ctrlKey||e.shiftKey||e.metaKey)||(t.preventDefault(e),make.app.events.linkbehavior.fire(this,this.getAttribute("data-behavior")),!1)})}),(function(r){var i=r.ajax,o=r.modal,s=(o.onLinkOpen=new r.CustomEvent("popstate",this,r.CustomEvent.FLAT),o.onLinkClose=new r.CustomEvent("popstate",this,r.CustomEvent.FLAT),r.history),l="modal-link-history",c=0,e=function(e){var t;e&&e.type===l?e.modal&&(o.top&&(t=o.get(o.top)).prev&&t.prev.id===e.modal&&o.close(),o.get(e.modal)||n(e.modal,e.title,e.href,!0)):c&&o.top&&o.close()};function u(){r.title.pop(),o.onLinkClose.fire(),--c,s.back()}function n(e,t,n,a){i.queue(function(e,t,n){var a=r.url.parse(i.get(e).options.url).relative;r.title.set(t),o.onLinkOpen.fire(a),c+=1,n||s.push({type:l,modal:e,href:a,title:t},a),o.onClose(e,u)}.bind(null,e,t,a),e),i.load(n,e)}r.queue.add(function(){s.pop.subscribe(e)}),r.app.events.linkbehavior.subscribe(function(e,t){"modal"===t&&n(e.getAttribute("data-id")||dom.generateId(),e.title,e.href,!1)})})(make),(function(a,l){var r,c,u,d={},i=!1,p=0,t=!1,n=l.event,o=a.fx,s=a.keyboard,m=a.keys.LEFT,f=a.keys.RIGHT,h=a.modal,v="down",g=".nav .prev",y=".nav .next",b="avatar-viewer",k=a.$1;function w(){r.onload=null,r.onerror=null}function _(e){var t=e.href,n=e.title;d[t]?A(t,n,d[t].w,d[t].h):(i=!0,(r=new Image).onload=function(e,t){i=!1,A(e,t,r.width,r.height)}.bind(r,t,n),r.onerror=function(e){i=!1,e.target="_blank",h.close(b),a.alert(2,"Failed to load image.")}.bind(r,e),r.src=t,a.dialog.open("Downloading image, please wait...",{id:b,header:n||"Loading image",icon:"picture",allowClose:!0,buttons:[{label:"Close"}]}),h.onClose(b,w))}function x(){u&&(t?t=!1:(C(c.length=0),u=c=null))}function A(e,t,n,a){d[e]={w:n,h:a};var r=l.getViewportWidth()-30,i=l.getViewportHeight()-30,o=n,s=a,r=((t&&t.length||u)&&(i-=51),i<(s=r<o?a*(o=r)/n:s)&&(o=(s=i)*n/a),(s<200?(200-s)/2:0)+"px"),i='<div style="width:'+(o<300?300:o)+'px;overflow:hidden"><img src="'+e+'" style="width:'+o+"px;height:"+s+"px;margin:"+r+' auto" alt="">';(u||t)&&(i+='<div class="fix">',u&&(i=i+'<div class="nav"><div class="next"><i class="fa fa-chevron-circle-right"></i></div><div class="prev"><i class="fa fa-chevron-circle-left"></i></div></div><p><em>photo '+(p+1)+" of "+c.length+"</em></p>"),t&&(i+="<p>"+t+"</p>"),i+="</div>"),h.open({id:b,type:"photo",allowClose:!0,showClose:!0,contents:i+="</div>"}),h.onClose(b,x),u&&C(1)}function C(e){var t;e?(t=e=!0,0===p?e=!1:p===c.length-1&&(t=!1),o.setVisible(k(g,b),e),o.setVisible(k(y,b),t),n.delegate(".nav div","click",E,b),s.register(v,m,S),s.register(v,f,S)):(n.removeDelegate(".nav div","click",E,b),s.unregister(v,m,S),s.unregister(v,f,S))}function E(){t=!0;var e=p+("next"===this.className?1:-1);0<=e&&e<c.length&&_(c[p=e])}function S(e){i||E.apply(k(n.getCharCode(e)===m?g:y,b))}a.app.events.linkbehavior.subscribe(function(e,t){var n;"photo"===t&&(null!==(n=(t=e).getAttribute("data-gallery"))&&n.length&&1<(c=a.$$("a[data-gallery="+n+"]")).length&&(p=c.indexOf(t),u=n),_(e))})})(make,dom),(function(t,n){var a=make.$,r=null,i=null,o=(n.event,"link-frame");function s(){var e=a(o);e.style.height=(i||n.getViewportHeight()-80)+"px",e.style.width=Math.min(r||n.getViewportWidth()-110,980)+"px",e=null,t.pos()}function l(){make.app.scroll.unsubscribe(s)}function c(e){t.open({id:o+"-modal",allowClose:!0,showClose:!0,contents:'<iframe src="'+e+'" id="'+o+'" frameborder=0></iframe>'}),s(),null!==r&&null!==i||(make.app.scroll.subscribe(s),t.onClose(o+"-modal",l))}make.app.events.linkbehavior.subscribe(function(e,t){"frame"===t&&((t=e.getAttribute("data-framesize"))&&(t=t.split("x"),r=0|t[0],i=0|t[1]),c(e.getAttribute("data-frameurl")||e.href))}),t.frame=function(e,t,n){r=t||null,i=n||null,c(e)}})(make.modal,dom),(function(n){var a,r=!1,i=function(e){this.iso=e};function e(){this.property=null,this.multi=!1,this.seamless=!1,this.step=0,this.rate=null,this.events={step:this.createEvent("step"),view:this.createEvent("view"),bkcode:this.createEvent("bkcode"),avlBegin:this.createEvent("avl-before"),avl:this.createEvent("avl"),inquirySent:this.createEvent("inquiry-sent"),rate:this.createEvent("rate"),price:this.createEvent("price"),extras:this.createEvent("extras"),ta:this.createEvent("ta"),corp:this.createEvent("corp"),property:this.createEvent("property"),bookError:this.createEvent("book-error"),track:this.createEvent("track-url"),trackEvent:this.createEvent("track-event"),conversionTrackingDone:this.createEvent("conversion-tracking-done")}}i.prototype.format=function(e){return e+' <span class="symbol">pt.</span>'},"Intl"in window&&(function(){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",currencyDisplay:"name"}).format(0),1}catch(e){}})()?(a=function(e,t){if("X"===e.charAt(0))return new i(e);t={style:"currency",currency:e,currencyDisplay:t||"symbol"};"IDR"===e&&(t.minimumFractionDigits=0),this.fmt=new Intl.NumberFormat(app.getLangTag(),t)}).prototype.format=function(e){var t=this.fmt.format(e),e=t.match(/[^0-9., ]+/g);return null!==e&&e.forEach(function(e){"&rlm;"!==e&&"&#x200f;"!==e&&"&#8207;"!==e&&"‏"!==e&&(t=t.replace(e,'<span class="symbol">'+e+"</span>"))}),t}:(a=function(e){this.iso=e}).prototype.format=function(e){return'<span class="symbol">'+this.iso+"</span> "+e.toFixed(2)};var t=e.prototype,o=(t.loading='<progress style="width:150px"></progress>',t.$=function(e){return document.getElementById(e)},t.createEvent=function(e){return new n.CustomEvent(e,this,n.CustomEvent.FLAT)},"en_GB"),s="en",l="en-GB",c=!1,u=!1;return t.getLocale=function(){return o},t.getLang=function(){return s},t.getLangTag=function(){return l},t.getCurrencyFormat=function(e,t){return new a(e,t)},t.isMobile=function(){return r},t.isEmbedded=function(){return c},t.isEngine=function(){return u},t.isFull=function(){return u&&!c},t.setStep=function(e){var t=this.step;this.step=e,this.events.step.fire(t,e)},t.getAvlForm=function(){return document.forms.namedItem("avlFrm")},t.getBookForm=function(){return document.forms.namedItem("bkFrm")},t.getDate=function(e){return Date.parsels(n.form.get(e))},t.getCurrentParams=function(){var a,r,e;return app.isEngine()?(a=[],3===app.step?(a.push("res_id="+app.amend.res_id),a.push("email="+app.amend.email)):(r=app.getAvlForm(),e="bk_code voucher location geoid offerid room geo properties rating exclusive",app.multi||(e+=" src"),app.avl.hasRun()&&(e+=" fromd tod nights rooms adults children infants htl_code cur_iso"),2===app.step?(a.push("rate="+app.rate.rate_id),a.push("direct")):e+=" rate",e.split(" ").forEach(function(e){var t=e;if(r.elements[e]){if("fromd"===e||"tod"===e){var n=Date.parsels(r.elements[e].value);if(null===n)return;n=n.iso(),t="fromd"===e?"checkin":"checkout"}else n=r.elements[e].value;if(n.length){switch(t){case"bk_code":t="bkcode";break;case"htl_code":t="property";break;case"cur_iso":t="currency"}a.push(t+"="+n)}}})),a.join("&")):n.app.uri.query},t.getUrl=function(){var e=app.getCurrentParams(),t=n.app.uri.protocol+"://"+n.app.uri.host+n.app.uri.path;return e.length&&(t+="?"+e),t},t.init=function(e){var t=window.pageData,n=t.locale,a=n.split("_");o=n,s=a[0],l=a[0]+"-"+a[1],t.css.forEach(function(e){loadCSS(e.url,e.media)}),r=document.body.classList.contains("phone"),u=!!this.getAvlForm(),t.embed&&(c=!0),t.multi&&(this.multi=!0,t.property)&&(this.property=t.property),t.seamless&&(this.seamless=!0),e.product=t.product,e.products=t.products,e.infant=t.infant,e.infants=t.infants},e})(make)),app=("scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),new App);function gtag(){dataLayer.push(arguments)}make.queue.add(app.init.bind(app,lang)),App.Tracking=(function(n,r){function e(){}var t,a=e.prototype,i=[],o=0,s=(t=new URL(document.location.href)).pathname+t.search,l=0,c=[];function u(e){l||(s=e),r.events.track.fire(e)}function d(e,t,n,a){r.events.trackEvent.fire(e,t,n,a)}function p(e,t){t=t[1],t=n.url.parse(t.url).relative;1===o?i.push(t):(2===o&&(i.forEach(u),i=[],o=0),u(t))}function m(e){l+=1,setImmediate(function(){c.push(e)})}function f(){--l,c.pop(),u(0<l?c[c.length-1]:s)}function h(e){d("Availability","Search",void 0===e||0===e.best&&0===e.prive?"Not Bookable":"Bookable")}function v(){n.ajax.async("/track/visit",null,{type:"plain"})}a.trackUrl=u,a.trackEvent=d,a.init=function(){if(n.ajax.onresponse.subscribe(p),n.modal.onLinkOpen.subscribe(m),n.modal.onLinkClose.subscribe(f),r.events.avl.subscribe(h),r.isFull()&&!window.pageData.multi&&!window.pageData.vtrk&&null===sessionStorage.getItem("vtrk")){this.delayInteractive(v);try{sessionStorage.setItem("vtrk","1")}catch(e){}}setTimeout(function(){g=!0,w()},r.isFull()?1750:750),n.on(document,"scroll",k),n.on(document,"keydown",k),n.on(document,"touchstart",k),n.on(document,"mousedown",k),n.on(document,"mousemove",k)},a.postpone=function(){o=1};var g=!(a.resume=function(){0!==o&&setImmediate(function(){0!==o&&(o=2)})}),y=!1,b=[];function k(){dom.event.remove(document,"scroll",k),dom.event.remove(document,"keydown",k),dom.event.remove(document,"touchstart",k),dom.event.remove(document,"mousedown",k),dom.event.remove(document,"mousemove",k),y=!0,w()}function w(){g&&y&&(b.forEach(function(e){e[0].apply(null,e[1])}),b=[])}return a.delayInteractive=function(e,t){b.push([e,t]),w()},e})(make,app),app.tracking=new App.Tracking,make.queue.add(app.tracking.init.bind(app.tracking)),App.Consent=(function(t){function e(){}function n(){dom.event.remove(document,"touchstart",n),dom.event.remove(document,"mousedown",n);var e=document.getElementById("cookie-consent");null!==e&&(e.parentNode.removeChild(e),e=null),t.ajax.async("/consent",null,{type:"plain"}),wh("config","cookie.consent")}return e.prototype.init=function(){!1===window.pageData.cookieConsent?wh("config","cookie.consent"):(t.on(document,"touchstart",n),t.on(document,"mousedown",n))},e})(make),app.consent=new App.Consent,make.queue.add(app.consent.init),window.dataLayer=window.dataLayer||[],gtag("consent","default",{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied"}),gtag("js",new Date),cookieConsent.then(function(){var t=window.pageData;if(t.track){gtag("consent","update",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"});var a=["firstname","lastname","email","tel","token","acidtkn","userData","paypal","res_id"],n="G-70JD5G815L",e=[],r=((e=void 0!==t.ga?e.concat(t.ga.split(",")).filter(function(e){return"UA"!==e.slice(0,2)}):e).push(n),{cookie_domain:location.hostname,cookie_flags:"SameSite=None;Secure",send_page_view:!1,anonymize_ip:!0});if(e.forEach(function(e,t){gtag("config",e,Object.assign(e!==n?{linker:{accept_incoming:!0}}:{},r))}),gtag("event","page_view",{page_path:s(location.pathname+location.search)}),app.events.track.subscribe(function(e){gtag("event","page_view",{page_path:s(e)})}),app.events.trackEvent.subscribe(function(e,t,n,a){e={event_category:e};null!=n&&(e.event_label=n),null!=a&&(e.event_value=a),gtag("event",t,e)}),app.tracking.delayInteractive(loadJS,["https://www.googletagmanager.com/gtag/js"]),void 0!==t.googleAds&&(e=t.googleAds,e=(e=void 0!==t.googleAdsRemarketingOnly?e.concat(t.googleAdsRemarketingOnly):e).map(function(e){return e.split("/")[0]}),(e=Array.from(new Set(e))).forEach(function(e){gtag("config",e,{groups:"ads"})})),void 0!==t.googleAdsRemarketingOnly&&t.googleAdsRemarketingOnly.forEach(function(e){gtag("event","conversion",{send_to:e,aw_remarketing_only:!0})}),void 0!==t.facebookAds){var i=window.fbq;function o(){var e=app.avl.params;return{content_type:"hotel",content_ids:app.multi?null!==app.property?[app.property]:t.properties:[pageData.property],checkin_date:e.checkin.iso(),checkout_date:e.checkin.clone().dayAdd(e.nights).iso(),num_adults:e.adults,num_children:e.children}}void 0===i&&(((i=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)}).push=i).loaded=!0,i.version="2.0",i.queue=[],window.fbq=i,window._fbq||(window._fbq=i),loadJS("https://connect.facebook.net/en_US/fbevents.js")),t.facebookAds.forEach(function(e){i("init",e)}),i("track","PageView");try{app.events.avl.subscribe(function(){i("track","Search",o())}),app.events.step.subscribe(function(e,t){2===t&&i("track","InitiateCheckout",o())})}catch(e){}}}function s(e){var t,n=e.indexOf("?");return-1===n?e:(t=new URLSearchParams(e.slice(n+1)),a.forEach(function(e){t.has(e)&&t.delete(e)}),e.slice(0,n+1)+t.toString())}}),App.Router=(function(){function e(){}return e.prototype.getUrl=function(e,t){var n="/"+e;return t&&Object.keys(t).forEach(function(e){n=make.url.queryAppend(n,e+"="+encodeURIComponent(t[e]))}),n},e})(),app.router=new App.Router,App.History=(function(){function e(){}var n,t=e.prototype,a=!0,r="",i=0,o=!1,s=!1,l=(t.syncing=function(e){0===(i+=e)&&!0===o&&(o=!1,setTimeout(function(){l(null)},0))},function(e){if(null==e||!e.modal)if(make.modal.top)make.modal.close(),setTimeout(function(){make.history.push(null,r.length?"/?"+r:"/")},0);else if(0<i)o=!0;else{var e=new URL(document.location.href).searchParams,t=e.toString();if(t!==r){if(e.has("res_id")&&e.has("email"))3!==app.step&&app.retrieval.load(e.get("res_id"),e.get("email"));else if(e.has("rate")&&e.has("direct")){if(2<app.step)return make.history.replace(null,"/"),r="",app.setStep(1),void setTimeout(function(){app.avl.run()},0);var n=make.$("rate-btn-"+e.get("rate"));n?n.click():history.go(-1)}else if(e.has("checkin")){if(1<app.step&&(app.setStep(1),app.avl.hasRun())&&!app.avl.isDirty())return void(r=t);app.ui.restore.avl({fromd:e.get("checkin"),rooms:e.get("rooms")||1,nights:e.get("nights")||1,adults:e.get("adults")||2,children:e.get("children")||0,infants:e.get("infants")||0,bk_code:e.get("bkcode")||"",voucher:e.get("voucher")}),app.multi&&(e.has("property")?app.property!==e.get("property")&&app.avl.setPropertyCode(e.get("property")):null!==app.property&&app.avl.setPropertyCode("")),app.avl.run()}else 1<app.step&&app.setStep(1);r=t}}});function c(n){var e=Object.keys(app.avl.params),t=app.getAvlForm().elements;e.forEach(function(e){var t=app.avl.params[e];switch(e){case"checkin":n.set(e,t.iso());break;case"children":case"infants":if(0===t)break;default:n.set(e,t.toString())}}),t.bk_code&&t.bk_code.value.length&&n.set("bkcode",t.bk_code.value),t.offerid&&t.offerid.value.length&&n.set("offerid",t.offerid.value),t.cur_iso&&t.cur_iso.value.length&&t.cur_iso.value!==pageData.currency&&n.set("currency",t.cur_iso.value),app.multi?(null!==app.property&&n.set("property",app.property),t.geoid&&t.geoid.value.length?(n.set("geoid",t.geoid.value),n.has("location")&&n.delete("location")):t.location&&t.location.value.length&&n.set("location",t.location.value)):t.src&&n.set("src",t.src.value),t.offer&&t.offer.value.length&&n.set("offer",t.offer.value),t.room&&t.room.value.length&&n.set("room",t.room.value),t.rate&&t.rate.value.length&&n.set("rate",t.rate.value),t.exlusive&&n.set("exlusive","1")}return t.init=function(){var t;app.seamless||(n=new URL(document.location.href),t=new Set(["goto","landingUrl","userData","logintoken","unit","party","day","res_id","email","book","direct","paypal","scalapay","PayerID","fclid","acidtkn","firstname","lastname","tel","seamless","referer","view","tpl","confirmation_code","htl_code","checkout","fromd","cur","currency","offerid","rate","bkcode"]),Array.from(n.searchParams.keys()).forEach(function(e){t.has(e)&&n.searchParams.delete(e),e.startsWith("pref_")&&n.searchParams.delete(e)}),make.history.pop.subscribe(l))},t.resetAll=function(){make.history.push(null,"/"),r=""},t.availability=function(){var e,t;app.seamless||(t=new URLSearchParams(n.searchParams.toString()),e=new URL(document.location.href),c(t),(t=t.toString())===e.searchParams.toString()||a&&pageData.avl?(a=!1,make.history.replace(null,"/?"+t)):make.history.push(null,"/?"+t),r=t)},t.checkout=function(e){var t;app.seamless||(c(t=new URLSearchParams(n.searchParams.toString())),t.set("rate",e),t.set("direct","1"),e=t.toString(),make.history.push(null,"/?"+e),r=e)},t.bookingAutoRetrieval=function(){s=!0},t.booking=function(){var e;app.seamless||((e=new URLSearchParams).set("res_id",app.amend.res_id),e.set("email",app.amend.email),e=e.toString(),s?make.history.replace(null,"/?"+e):make.history.push(null,"/?"+e),r=e)},e})(),app.history=new App.History,make.queue.add(app.history.init),App.Util=(function(){function e(){}return e.prototype.trimValues=function(e,t){for(var n=t.split(","),a=n.length;a--;)e.elements[n[a]]&&(e.elements[n[a]].value=e.elements[n[a]].value.trim())},e})(),app.util=new App.Util,App.BkCode=(function(o,s){function e(){this.code=null,this.msg=null,this.external=!1,this.reset=!1}var t=e.prototype,r=o.ajax,l=s.$,c="modal-bkcode",n=null;function a(e){return"bkcode"!==e||(s.bkcode.open(),!1)}function u(e){var t=l("bk-code");t&&(null===n&&(n=o.$1("a",t).innerHTML),t.innerHTML=e?'<button class="warning" onclick="app.bkcode.open()"><span role=presentation class="fa fa-times"></span> '+n+"</button>":'<a href="javascript:app.bkcode.open()">'+n+"</a>",s.ui.menuClose())}function i(e){var t="bkcode-alert",n=s.getAvlForm().elements.bk_code,a=s.getBookForm().elements.bk_code,r=e.code,i=(i=l(t))||dom.add("div",l("app-msg"),{id:t,className:"alert"});if(r)n.value=r,a.value=r,null!==e.msg&&(i.innerHTML='<div class="right"><a href="javascript:app.bkcode.disable()" title="RESET"><span role="presentation" class="fa fa-times-circle-o"></span></a></div> '+e.msg,i.style.display="block"),u(1),this.external||o.notify(4,o.string.format(lang.bkcode_now_active,r));else if(n.value="",a.value="",i.style.display="none",u(0),this.reset)o.notify(4,lang.bkcode_not_active);else{if(!this.external)return o.alert(2,lang.bkcode_not_found),!1;s.tracking.resume(),o.notify(2,lang.bkcode_not_found)}return this.external?this.external=!1:this.reset?this.reset=!1:o.modal.close(c),!0}return t.open=function(){1!==s.step?alert("Please return to availability search to use this feature."):this.isActive()?this.disable():r.load("/bookingcode/enter",c,s.loading)},t.isActive=function(){return null!==this.code},t.applyCode=function(e){var e=e.elements.bk_code,t=e.value.trim();return t.length?(s.bkcode.set(t),!1):o.form.error(lang.bkcode_not_entered,e)},t.clear=function(){1!==s.step&&s.setStep(1),this.code=null,this.msg=null},t.disable=function(){1!==s.step&&s.setStep(1),this.clear(),this.reset=!0,s.events.bkcode.fire(this)},t.set=function(e){1!==s.step&&s.setStep(1);var n=this,a="bkcode-set";r.post({bk_code:e}),r.queue(function(){var e=r.getJSON(a),t=e.code.toString();t.length?(n.code=t,n.msg=e.msg||null):n.clear(),s.events.bkcode.fire(n)},a),r.loadJSON("/bookingcode/apply",a,lang.bkcode_set)},t.init=function(){var e;s.isFull()&&((e=document.forms.avlFrm.elements.bk_code)&&e.value.length&&(this.external=!0,s.tracking.postpone(),this.set(e.value)),s.events.view.subscribe(a),s.events.bkcode.subscribe(i,this,!0))},e})(make,app),app.bkcode=new App.BkCode,make.queue.add(app.bkcode.init.bind(app.bkcode)),App.Retrieval=(function(n,a){function e(){}var r,i,t=e.prototype,o=a.ajax,s=a.form,l=a.modal,c="do-retrieve",u=c+"-act",d=!1;function p(){n.history.syncing(1),o.queue(h,u),o.loadJSON("/reservation",u,lang.retrieving_res)}function m(){r?n.retrieval.load(r,i):n.retrieval.check(),n.events.ta.unsubscribe(m)}function f(){r?n.retrieval.load(r,i):n.retrieval.check(),n.events.corp.unsubscribe(f)}function h(){n.history.syncing(-1);var e=o.getJSON(u);if(1<e.flag)if(e.ta)n.events.ta.subscribe(m),n.ui.ta.login(e.ta);else{if(!e.corp)return void a.alert(e.flag,e.msg);n.events.corp.subscribe(f),n.ui.corp.login(e.corp)}else n.amend.load(e);null!==l.get(c)&&l.close(c),!d&&0<n.amend.res_id&&void 0!==a.app.uri.queryKey.modify&&(n.ui.reservation.amend(),d=!0)}function v(e){var t;return"amend"!==e&&"retrieval"!==e||((t=a.app.uri.queryKey).error&&(o.queue(function(){a.alert(2,"1"===t.error?lang.retrieve_cred_error:lang.retrieve_not_found)},c),delete t.error),n.retrieval.launch(),!1)}return t.launch=function(){o.load("/retrieval",c,n.loading)},t.validate=function(e){var t=e.elements,n=t.email,t=t.confirmation_code,a=t.value;return n.value.length?a.length?(a=parseInt(a),isNaN(a)||a<1e7||99999999<a?s.error(lang.conf_no_error,t):(r=a-1e7,i=n.value,o.post(e),p(),!1)):s.error(lang.type_conf_no,t):s.error(lang.invalid_email,n)},t.check=function(){var e=a.app.uri.queryKey;return!(!e.res_id||!e.email||(n.history.bookingAutoRetrieval(),this.load(e.res_id,e.email),0))},t.init=function(){n.isFull()&&!this.check()&&n.events.view.subscribe(v)},t.load=function(e,t){o.post({confirmation_code:1e7+parseInt(e),email:t}),p()},t.reload=function(){var e=n.amend.getResId();e&&this.load(e,n.amend.getEmail())},e})(app,make),app.retrieval=new App.Retrieval,make.queue.add(app.retrieval.init.bind(app.retrieval)),App.Avl=(function(o,s){function e(){this.params={}}var t=e.prototype,l=s.ajax,r=s.form,i=s.string.format,c=o.getDate,n=o.$,a=!1,u="ajax-avl",d=!1;function p(e){(e.code||this.hasRun())&&this.run()}function m(e,t,n){e[n]&&e[n].value.length&&(t[n]=e[n].value)}function f(){var e=pageData.rate?n("rate-btn-"+pageData.rate):s.$1("button[id]:enabled","rm-box");if(e&&!e.disabled)try{return void e.click()}catch(e){}o.tracking.resume()}function h(){var e="/track/demand";if(window.pageData.multi){if(null===o.property)return;e+="?property="+o.property}l.async(e,null,{type:"plain"})}function v(){o.history.syncing(-1);var e=l.get(u).data;if(o.ui.avl.getRoomBox().innerHTML=e.html,d||(d=!0,window.pageData.direct?setImmediate(f):o.tracking.resume()),!0===e.demand&&null===sessionStorage.getItem("demand")){o.tracking.delayInteractive(h);try{sessionStorage.setItem("demand","1")}catch(e){}}o.events.avl.fire(e.price_check)}function g(e,t){1===t&&(a?(this.run(),a=!1):t<e&&o.tracking.trackUrl("/avl"))}return t.modalSelect=function(t){s.modal.close(),setTimeout(function(){var e=n("rate-btn-"+t);e&&e.click()},200)},t.alternative=function(e){var t=o.getAvlForm();t.action="https://"+e,t.submit()},t.dateWithinRange=function(e,t){var n=s.app.today.clone();return n.dayDiff(e)<0?r.error(i(lang.avl_date_past,n.format()),t):!(1095<n.dayDiff(e))||r.error(i(lang.avl_date_future,n.dayAdd(730).format()),t)},t.setParam=function(e,t){this.params[e]=t},t.getParam=function(e){return this.params[e]},t.getParams=function(){return this.params},t.select=function(n,e){var t=this.params.checkin.iso(),a=o.getBookForm().elements,r="rate-select-ajax",i=(a.fromd.value=t,a.nights.value=this.params.nights,a.rooms.value=this.params.rooms,a.rate_id.value=n,a.adults.value=this.params.adults,a.children.value=this.params.children,a.infants.value=this.params.infants,{rate:n,checkin:t,nights:this.params.nights,rooms:this.params.rooms,adults:this.params.adults,children:this.params.children,infants:this.params.infants});this.params.voucher&&(i.voucher=this.params.voucher),m(a,i,"bk_code"),m(a,i,"src"),o.multi&&(e?o.property!==(i.htl_code=e)&&this.setPropertyCode(e):null!==o.property&&(i.htl_code=o.property),window.pageData.redirect_to_single)?(l.stack(function(){var e=l.getJSON(r),t=o.getAvlForm();t.action="https://"+e.host+"/?direct&lang="+window.pageData.locale+"&rate="+n,t.submit()},r),l.loadJSON("/get-host?htl_code="+i.htl_code,r,lang.loading_billing_form)):(o.history.syncing(1),o.history.checkout(n),l.stack(function(){o.history.syncing(-1);var e=l.getJSON(r);void 0!==e.flag?(s.alert(e.flag,e.msg),o.avl.run()):(o.rate=new App.Rate(e),i.htl_code&&(o.getBookForm().elements.htl_code.value=i.htl_code),2!==o.step&&o.tracking.trackUrl("/rate-select?room="+o.rate.rm_type+"&rate="+o.rate.rate_id),o.setStep(2),o.events.rate.fire(o.rate),o.events.price.fire())},r),l.post(i),l.loadJSON("/checkout",r,lang.loading_billing_form))},t.jump=function(e){var t=o.getAvlForm().elements,n=c(t.fromd);n.dayAdd(e),r.set(t.fromd,n),t.tod&&o.ui.avl.dateChange(),this.run()},t.resetPropertyCode=function(e){o.property="string"==typeof e&&e.length?e:null,o.getAvlForm().elements.htl_code.value=e},t.setPropertyCode=function(e){o.ui.avl.forgetScroll(),this.resetPropertyCode(e),o.events.property.fire()},t.setProperty=function(e){this.setPropertyCode(e),this.run()},t.run=function(e){if(o.ta.logged&&!o.ta.enabled||o.corp.logged&&!o.corp.enabled)s.alert(4,"Please sign-out in order to search for availability.");else{var t=i(lang.searching_rooms,lang.products.toLowerCase()),n=o.getAvlForm(),a=n.elements;if(!r.stopPost)if(r.has(a.fromd)){if(this.params.checkin=c(a.fromd),this.dateWithinRange(this.params.checkin,a.fromd)){if(this.params.rooms=0|a.rooms.value,a.tod?this.params.nights=a.tod.value.length?this.params.checkin.dayDiff(c(a.tod)):0:this.params.nights=0|a.nights.value,this.params.nights<1)return r.error(i(lang.avl_date_past,this.params.checkin.clone().dayAdd(1).format()),a.tod||a.nights);this.params.adults=0|a.adults.value,this.params.children=0|a.children.value,this.params.infants=0|a.infants.value,r.has(a.voucher)&&a.voucher.value.trim().length&&(this.params.voucher=a.voucher.value.trim()),a.checkin.value=this.params.checkin.iso(),a.checkout.value=this.params.checkin.clone().dayAdd(this.params.nights).iso(),o.calendar.open?o.calendar.launch():(e&&"change"===e.type&&"cur_iso"===dom.event.getTarget(e).name&&(t=i(lang.converting_prices,r.selectText(dom.event.getTarget(e)))),o.history.syncing(1),o.history.availability(),o.events.avlBegin.fire(),l.stack(v,u),l.post(n),l.loadJSON("/avl",u,t))}}else r.error(lang.enter_checkin,a.fromd)}},t.hasRun=function(){return d},t.isDirty=function(){return a},t.setDirty=function(e){a=!1!==e},t.init=function(){var e;o.isFull()&&((e=o.events).bkcode.subscribe(p,this,!0),e.step.subscribe(g,this,!0))},e})(app,make),app.avl=new App.Avl,make.queue.add(app.avl.init.bind(app.avl)),App.Calendar=(function(n,a){function e(){this.open=!1}var t=e.prototype,r=a.ajax,i=a.modal,o=a.form,s=a.fx,l=dom.event,c=n.getDate,u=a.$$,d=n.$,p="calendar-avl",m=!1,f=!1,h=!1,v=0,g=null,y=!1,b=null,k=null,w=null,_=0;function x(e){for(var t=l.getTarget(e);null===t.getAttribute("data-date");)t=t.parentNode;m=!0,k=Date.parseIso(t.getAttribute("data-date")),i.close()}function A(e){var t=c(n.getAvlForm().elements.fromd);t.setMonth(t.getMonth()+e),k=t,m=!0,i.close(p),n.calendar.open=!0,m=!0}function C(){E(y=null!==n.property)}function E(e){b&&b.isAnimated()&&b.stop(),b=e?s.fadeIn(g,.5):s.fadeOut(g,.5)}function S(e){E(y=!e)}function T(e){return"flexible"!==e||(this.run(),!1)}function L(e){var t=0|this.getAttribute("data-index"),n=t+v;for(l.remove(this,"mouseleave",L),this.classList.remove("checkin"),t+=1;t<n;){if(_<=t)return;w[t].classList.remove("stay"),t+=1}_<=n||w[n].classList.remove("checkout")}function M(e){var t=0|this.getAttribute("data-index"),n=t+v;for(l.add(this,"mouseleave",L),this.classList.add("checkin"),t+=1;t<n;){if(_<=t)return;w[t].classList.add("stay"),t+=1}_<=n||w[n].classList.add("checkout")}return t.run=function(){this.open=!0,n.bkcode.external||n.avl.run()},t.launch=function(){r.queue(function(){var e=d(i.top);w=u(".calendar > :nth-child(n + 8)",e),_=w.length,l.add(u(".calendar > .avl",e),"mouseenter",M),l.delegate(".calendar > [data-date]","click",x),v=n.avl.getParam("nights"),i.onClose(p,function(){var e=n.getAvlForm().elements,t=n.calendar;l.removeDelegate(".calendar [data-date]","click",x),w=null,m&&(k<a.app.today&&(k=a.app.today),o.set(e.fromd,k),e.tod)&&n.ui.avl.dateChange(),(m||f||h)&&(h=f=m=!1,setImmediate(function(){n.avl.run()})),t.open=!1})},p),r.post(n.getAvlForm()),r.load("/calendar",p,"Loading Calendar Availability.")},t.nights=function(e){n.ui.avl.setNights(0|e),f=!0,i.close(p),this.open=!0,f=!0},t.room=function(e){n.getAvlForm().elements.room.value=e,h=!0,i.close(p),this.open=!0,h=!0},t.next=function(){A(1)},t.prev=function(){A(-1)},t.init=function(){n.isFull()&&null!==(g=d("calendar-btn"))&&(n.events.ta.subscribe(S),n.events.corp.subscribe(S),n.multi&&(n.events.property.subscribe(C),null===n.property)||(y=!0),n.events.view.subscribe(T,this,!0),E(y))},e})(app,make),app.calendar=new App.Calendar,make.queue.add(app.calendar.init.bind(app.calendar)),App.Rate=(function(){function e(e){this.adults=e.adults,this.children=e.children,this.infants=e.infants,this.rate_id=e.rate,this.checkin=Date.parseIso(e.checkin),this.checkin_full=e.checkin_full,this.checkout=Date.parseIso(e.checkout),this.checkout_full=e.checkout_full,this.nights=e.nights,this.rooms=e.rooms,this.stay=e.stay,this.extra=e.extra,this.tax=e.tax,this.price=e.total,this.total=e.total,this.retail=e.retail,this.commission=e.commission,this.vch=e.vch,this.credit=e.credit,this.extras=e.extras||null,this.preferences=e.preferences||null,this.property=e.property,this.htltitle=e.htltitle||null,this.rm_type=e.rm_type,this.room=e.rm_name,this.unit_type=e.unit_type,this.unit=e.unit,this.units=e.units,this.name=e.rate_name,this.type=e.rate_type,this.free_cancel=e.free_cancel,this.description=e.description,this.board=e.board||null,this.board_icon=e.board_icon||null,this.avatar=e.avatar,this.link=e.link,this.payment_policy=e.payment_policy,this.cancel_penalty=e.cancel_penalty,this.cancel_policy=e.cancel_policy,this.billing=1===e.billing||1===e.personal_required,this.cards=e.cards?e.cards.split(","):[],this.payment_types=e.payment_types,this.payment_full=e.payment_full,this.payment_deposit=e.payment_deposit,this.payment_actions=e.payment_actions,this.currency=e.cur_iso,this.prices_in=e.prices_in||null,this.charged_in=e.charged_in||null,this.excluded_charges=e.excluded_charges||null,this.excluded_charges_total=e.excluded_charges_total||0,this.html=e.html,this.smartguest=e.smartguest||null,this.transfer_show=e.transfer_show,this.transfer_required=e.transfer_required}var t=e.prototype;return t.hasExtras=function(){return null!==this.extras},t.getExtras=function(){return this.extras},t.hasPreferences=function(){return null!==this.preferences},t.getPreferences=function(){return this.preferences},t.getDisplayCurrency=function(){return null!==this.prices_in?this.prices_in.iso:this.currency},t.getConverted=function(e){if(null===this.prices_in)return e;var t=this.prices_in.rate*e;switch(this.prices_in.iso){case"IDR":case"VND":t=1e3*Math.floor(t/1e3);break;case"BHD":case"JOD":case"KWD":case"OMR":t=Math.round(1e3*t)/1e3;break;case"JPY":case"KRW":t=Math.round(t);break;default:t=Math.round(100*t)/100}return t},e})(),App.Extras=(function(o){function e(){this.extras=[],this.index={},this.render=[],this.price=0,this.subtotal=0,this.commission=0,this.minimum=null}var t=e.prototype;function n(e){2===o.step&&(o.extras.load(e.getExtras()),a.apply(o.extras),o.events.extras.fire())}function a(){var e=0,t=this.extras.length;for(this.price=0,this.subtotal=0,this.commission=0,this.render=[];e<t;e+=1){var n=this.extras[e],a=n.required?1:o.ui.extras.getValue(n.id),r=a*n.price,i=a*n.commission;a&&(this.price+=r,n.required?this.price-=i:(this.subtotal+=r,this.commission+=i)),this.render.push({id:n.id,name:n.name,price:r,defaultPrice:n.price,unit:n.unit,commission:i,qty:a})}o.ui.extras.render(this.render),o.isMobile()||setTimeout(o.ui.checkout.summaryPos,0)}return t.get=function(e){return void 0===this.index[e]&&(this.index[e]=(function(e,t){for(var n=0,a=e.length;n<a;n+=1)if(e[n].id===t)return n;throw Error("extra position not found")})(this.extras,e)),this.extras[this.index[e]]},t.load=function(e){this.extras=null!==e?e:[],this.index={}},t.setMinimum=function(e){this.minimum=e,t.setMinimum=function(){}},t.validateMin=function(e,t){if(this.extras.length){var n=null;if("number"==typeof this.minimum?n=this.minimum:void 0!==this.minimum.rooms&&"number"==typeof this.minimum.rooms[t.rm_type]?n=this.minimum.rooms[t.rm_type]:void 0!==this.minimum.rates&&"number"==typeof this.minimum.rates[t.rate_id]&&(n=this.minimum.rates[t.rate_id]),null!==n)try{if(make.$$("table.extras input","extras-area").map(function(e){return"checkbox"===e.type?!0===e.checked?1:0:(e=parseInt(e.value,10),isNaN(e)?0:e)}).reduce(function(e,t){return e+t},0)<n)return make.form.error(make.string.format(lang.select_at_least_n,n),make.$1("h2","extras-area"))}catch(e){return!1}}return!0},t.init=function(){o.isFull()&&(o.events.rate.subscribe(n),o.events.extras.subscribe(a,this,!0),o.events.extras.subscribe(function(){o.events.price.fire()}))},e})(app),app.extras=new App.Extras,make.queue.add(app.extras.init.bind(app.extras)),App.Transfers=(function(){function e(){}var a=!1;function r(){return app.extras.extras.some(function(e){return"TRANSFER"===e.type&&(e.required||0<app.ui.extras.getValue(e.id))})}return e.prototype.validate=function(e,t){if(e.elements.arrival_date){var n=make.form;if(!0!==t.transfer_required||"ALWAYS"!==t.transfer_show&&!r())a||(e.elements.arrival_time.value="",e.elements.departure_time.value="");else{if(!n.has(e.elements.arrival_time))return n.error(lang.invalid_value,e.elements.arrival_time);if(!n.has(e.elements.arrival_details))return n.error(lang.invalid_value,e.elements.arrival_details)}}return!0},app.events.extras.subscribe(function(){var e;a=!(null===app.rate||void 0===app.rate.transfer_show||"ALWAYS"!==app.rate.transfer_show&&(e=document.getElementById("transfer-area"),r()?(e.classList.remove("d-none"),0):(e.classList.add("d-none"),1)))}),e})(),app.transfers=new App.Transfers,App.Preferences=(function(){function e(){}return e.prototype.validate=function(e,t){var n=t.preferences;if(n&&n.required)for(var a,r=0,i=n.required.length,o=make.form;r<i;r+=1)if(a=e.elements["pref_"+n.required[r]],!o.has(a))return o.error(lang.invalid_selection,a.length&&"radio"===a.type?a[0]:a);return!0},e})(),app.preferences=new App.Preferences,App.Voucher=(function(n){function e(){this.check=!1,this.prevPrice=0,this.code=""}var t=e.prototype,a=make.form,r=make.ajax;function i(e,t){2===t&&this.check&&(this.check=!1,r.post({cur:n.rate.currency,voucher:this.code,applied:n.rate.vch?1:0,diff:this.prevPrice-n.rate.stay}),r.load("/voucher","voucher-check"))}return t.validate=function(){var e=n.getBookForm().elements.vouchercheck;e&&a.has(e)?(this.check=!0,this.code=e.value,this.prevPrice=n.rate.stay,n.avl.setParam("voucher",this.code),n.setStep(1),n.avl.select(n.rate.rate_id,n.rate.property),n.avl.setDirty()):a.error("Please enter a voucher/promo code.",e)},t.init=function(){n.isFull()&&(n.events.step.subscribe(i,this,!0),n.getAvlForm().voucher.value.length)&&(this.check=!0)},e})(app),app.voucher=new App.Voucher,make.queue.add(app.voucher.init.bind(app.voucher,app,make)),App.Validate=(function(a){function e(){}var t=e.prototype,r=make.form;return t.personal=function(e,t){var n=e.elements;if(a.util.trimValues(e,"firstname,lastname,email,tel"),e.elements.email.value=e.elements.email.value.replace(/\s/g,""),!r.has(n.country))return r.error(lang.invalid_country,n.country);if(!r.has(n.firstname))return r.error(lang.invalid_firstname,n.firstname);if(!r.has(n.lastname))return r.error(lang.invalid_lastname,n.lastname);if(!r.has(n.email))return r.error(lang.invalid_email,n.email);if(n.tel&&n.tel.hasAttribute("required")&&!r.has(n.tel))return r.error(lang.invalid_tel,n.tel);if(n.invoice_fields_enabled&&n.invoice_fields_enabled.checked){if(!r.has(n.inv_cmp_name))return r.error(lang.invalid_company,n.inv_cmp_name);if(!r.has(n.inv_tax_id))return r.error(lang.invalid_tax_id,n.inv_tax_id);if(!r.has(n.inv_country))return r.error(lang.invalid_country,n.inv_country);if(!r.has(n.inv_tel))return r.error(lang.invalid_tel,n.inv_tel);if(!r.has(n.inv_address))return r.error(lang.invalid_address,n.inv_address);if(!r.has(n.inv_location))return r.error(lang.invalid_location,n.inv_location);if(!r.has(n.inv_region))return r.error(lang.invalid_region,n.inv_region);if(!r.has(n.inv_postal))return r.error(lang.invalid_postal,n.inv_postal)}if(t&&t.billing){if(!r.has(n.address))return r.error(lang.invalid_address,n.address);if(!r.has(n.location))return r.error(lang.invalid_location,n.location);if(!r.has(n.region))return r.error(lang.invalid_region,n.region);if(!r.has(n.postal))return r.error(lang.invalid_postal,n.postal)}return!0},t.agentLogin=function(e){e=e.elements;return r.has(e.email)?!!r.has(e.password)||r.error("Please enter your password.",e.password):r.error("Please enter your email.",e.email)},t.loyaltyLogin=function(e){e=e.elements;return!!r.has(e.email)||r.error("Please enter your email.",e.email)},t.loyaltyPin=function(e){e=e.elements;return r.has(e.pin)?4===e.pin.value.length||r.error("Please enter a valid 4-digit PIN.",e.pin):r.error("Please enter the PIN we sent to your inbox.",e.pin)},e})(app),app.validate=new App.Validate,App.Payment=(function(n){var t=!1,a=make.form;function e(){this.types=[],this.type=null}var r=e.prototype;function i(){n.payment.setType(this.value)}function o(e){this.loadTypes(e)}function s(e){if(2===e)for(var t=0;t<this.types.length;t+=1)this[this.types[t]].unload()}return r.getPaymentField=function(){return n.getBookForm().elements.payment_type},r.validate=function(e,t){return!t.payment_types.length||(a.has(this.getPaymentField())?n.payment[this.type].validate(e,t):a.error("Please select payment type",this.getPaymentField()))},r.loadTypes=function(e){this.types=e.payment_types,this.types.length&&(this.type=this.types[0],this[this.type].load(),a.set(this.getPaymentField(),this.type),1<this.types.length)&&(t||(dom.event.delegate(".payment-type input[type=radio]","click",i,"step-2"),t=!0))},r.setType=function(e){e!==this.type&&(this[this.type].unload(),this.type=e,this[e].load())},r.init=function(){n.isFull()&&(n.events.rate.subscribe(o,this,!0),n.events.step.subscribe(s,this,!0))},e})(app),app.payment=new App.Payment,make.queue.add(app.payment.init.bind(app.payment)),App.Payment.CreditCard=(function(c,u){function e(){this.type="creditcard"}var t=e.prototype,d=u.form,p=u.ajax,m=u.string.format,i=c.$,o=u.$1,s=u.fx,n=null,a=null,r=!1;function l(e,t){this.type=e,this.name=t}function f(e,t){this.card=e,void 0!==t.prefix?(this.from=t.prefix,this.to=t.prefix):(this.from=t.from,this.to=t.to),this.prefix=(this.from+"").length,void 0!==t.len?this.lenArr=Array.isArray(t.len)?t.len:[t.len]:(this.lmin=t.lmin,this.lmax=t.lmax)}f.prototype.matches=function(e){e=0|e.substr(0,this.prefix);return e>=this.from&&e<=this.to},f.prototype.validate=function(e,t){var n;return!(!this.matches(e)||"Union"!==t&&!this.luhn(e))&&(n=e.length,this.lenArr?this.lenArr.some(function(e){return n===e}):n>=this.lmin&&n<=this.lmax)},f.prototype.luhn=function(e){for(var t=e.length,n=0,a=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],r=0;t--;)r+=a[n][0|e.charAt(t)],n^=1;return r%10==0&&0<r};var h={visa:new l("Visa","Visa"),mc:new l("MC","MasterCard"),amex:new l("AmEx","American Express"),din:new l("DIN","Diners Club"),disc:new l("Disc","Discover"),maes:new l("Maes","Maestro"),jcb:new l("JCB","JCB"),union:new l("Union","UnionPay")},v=[new f(h.visa,{prefix:4,len:[16,18,19]}),new f(h.mc,{from:2221,to:2720,len:16}),new f(h.mc,{from:51,to:55,len:16}),new f(h.amex,{prefix:34,len:15}),new f(h.amex,{prefix:37,len:15}),new f(h.din,{from:300,to:305,len:[14,16,19]}),new f(h.din,{prefix:36,len:[14,16,19]}),new f(h.din,{prefix:38,len:[14,16,19]}),new f(h.din,{prefix:39,len:[14,16,19]}),new f(h.disc,{prefix:6011,len:[16,19]}),new f(h.disc,{from:622126,to:622925,len:[16,19]}),new f(h.disc,{from:644,to:649,len:[16,19]}),new f(h.disc,{prefix:65,len:[16,19]}),new f(h.maes,{prefix:5018,lmin:12,lmax:19}),new f(h.maes,{prefix:5020,lmin:12,lmax:19}),new f(h.maes,{prefix:5038,lmin:12,lmax:19}),new f(h.maes,{prefix:5893,lmin:12,lmax:19}),new f(h.maes,{prefix:6304,lmin:12,lmax:19}),new f(h.maes,{prefix:639,lmin:12,lmax:19}),new f(h.maes,{prefix:6759,lmin:12,lmax:19}),new f(h.maes,{from:6761,to:6763,lmin:12,lmax:19}),new f(h.jcb,{prefix:1800,lmin:16,lmax:19}),new f(h.jcb,{prefix:2131,lmin:16,lmax:19}),new f(h.jcb,{from:3528,to:3589,lmin:16,lmax:19}),new f(h.union,{prefix:62,lmin:14,lmax:19}),new f(h.union,{prefix:81,lmin:14,lmax:19})];function g(e){for(var t=0,n=v.length;t<n;t+=1)if(v[t].matches(e))return{num:e,valid:v[t].validate(e,v[t].card.type),type:v[t].card.type,name:v[t].card.name,supported:0<=c.rate.cards.indexOf(v[t].card.type)};return null}function y(e,t){var n=o("."+e.type,"card-set"),a=t?"add":"remove",r=i("issue-no");null!==r&&s["Maes"===e.type&&t?"show":"hide"](r),n.classList[a]("active"),n.parentNode.classList[a]("selected")}function b(){null!==a&&(a.supported&&y(a,0),a=null)}function k(){var e=this,t=e.value.replace(/[^\d -]/g,""),n=t.replace(/\D/g,"");e.value!==t&&(e.value=t),n.length?(null!==a&&a.num===n||(b(),(a=g(n))&&a.supported&&y(a,1)),null!==a&&a.valid&&a.supported?(e.parentNode.classList.add("valid"),e.classList.add("valid")):(e.parentNode.classList.remove("valid"),e.classList.remove("valid"))):(e.parentNode.classList.remove("valid"),e.classList.remove("valid"),b())}return t.load=function(e){e&&(r=!0),(c.isFull()&&2===c.step||r)&&((n=i("card-set")).style.display="block",e=o("input[name=cardnumber]",n),u.on(e,"change",k),u.on(e,"keyup",k),e.value.length)&&k.call(e)},t.unload=function(){var e;null!==n&&(n.style.display="none",e=o("input[name=cardnumber]",n),dom.event.remove(e,"change",k),dom.event.remove(e,"keyup",k),n=a=null)},t.validate=function(e){var t=e.elements,n=t.cardnumber,a=t.cardname,r=t.cardtype,i=t.cardmonth,o=t.cardyear,s=t.cardcvv,l=t.issue_no,t=t.cardbank;if(c.util.trimValues(e,"cardnumber,cardname,cardcvv,issue_no,cardbank"),!d.has(n))return d.error(lang.invalid_cardnum_missing,n);e=g(n.value.replace(/\D/g,""));if(!e)return d.error(lang.invalid_cardnum_missing,n);if(!e.supported)return dom.focus.el=n,p.load("/invalid-card-type?name="+encodeURIComponent(e.name)+"&types="+c.rate.cards.join(",")),!1;if(!e.valid)return d.error(m(lang.invalid_cardnum,e.name)+'<div class="cc-typo">'+n.value+"</div>");if(r.value=e.type,!d.has(a))return d.error(lang.invalid_cardname,a);if(!d.has(i))return d.error(lang.invalid_cardmonth,i);if(!d.has(o))return d.error(lang.invalid_cardyear,o);n=new Date(parseInt(d.get(o)),parseInt(d.get(i))-1,1),e=new Date(u.app.today.getFullYear(),u.app.today.getMonth(),1);if(n<e)return d.error(m(lang.invalid_expiry,e.monthAdd(-1).print("y")),i);if(s){if(!d.has(s))return d.error(lang.invalid_cvv,s);a="AmEx"===r.value?4:3;if(s.value.length!==a||!u.valid.integer(s))return d.error(m(lang.invalid_cvv_no,a,4==a?lang.invalid_cvv_front:lang.invalid_cvv_back),s)}return l&&"Maes"===d.get(r)&&!d.has(l)?d.error(lang.invalid_issue,l):!(t&&!d.has(t))||d.error(lang.invalid_cardbank,t)},e})(app,make),app.payment.creditcard=new App.Payment.CreditCard,App.Payment.ECommerce=(function(n,t){function e(){this.type="ecommerce"}var a=e.prototype,r=t.modal,i=null,o="pay-modal",s=!1;function l(e){switch(e.origin){case"https://pay-test.axepta.it":case"https://pay.axepta.it":switch(e.data){case"axepta_SUCCESS_message":var t=document.getElementById("pay-frame-loading");void 0!==t&&(t.style.display="block"),i.listener&&((t=c(i.listener)).target="pay-frame",t.submit());break;case"axepta_FAILURE_message":n.payment.ecommerce.failure("Cardholder Authentication Failed.")}}}function c(n){var a=document.createElement("form");return a.method="POST",a.action=n.bank.endpoint,Object.keys(n.fields).forEach(function(e){var t=document.createElement("input");t.type="hidden",t.name=e,t.value=n.fields[e],a.appendChild(t)}),document.body.appendChild(a),a}function u(){var e=window.pageData;e.restore_msg&&t.alert(2,e.restore_msg.replace(/\n/g,"<br>"))}return a.load=function(){},a.unload=function(){},a.validate=function(){return!0},a.process=function(e){this.redirectingMsg(),e.fields?c(e).submit():e.bank.endpoint&&(document.location=e.bank.endpoint)},a.redirectingMsg=function(){t.modal.open({id:o,allowClose:!1,showClose:!1,contents:'<div style="padding:40px"><h3>'+lang.lib.please_wait+'</h3><p style="text-align:center"><span role="presentation" class="fa fa-spin fa-circle-o-notch fa-3x"></span></p></div>'})},a.success=function(){n.retrieval.load(i.res_id,i.email,"new"),i=null,r.close(o)},a.failure=function(e){i=null,r.close(o),t.alert(2,e)},a.secure3d=function(e){var t;n.tracking.trackUrl("/3dsecure"),r.open({id:o,allowClose:!1,showClose:!1,contents:'<div id="pay-frame-loading" style="padding:40px;text-align:center;"><h3>'+lang.lib.please_wait+'</h3><p><span role="presentation" class="fa fa-spin fa-circle-o-notch fa-3x"></span></p></div><iframe name="pay-frame" style="width:'+Math.min(800,dom.getViewportWidth()-60)+"px;height:"+Math.max(500,dom.getViewportHeight()-110)+'px" id="pay-frame" frameborder=0 onload="document.getElementById(\'pay-frame-loading\').style.display=\'none\'"></iframe>'}),e.sec3dform&&(document.getElementById("pay-frame").srcdoc=e.sec3dform),e.tdsMethod&&((t=document.createElement("iframe")).sandbox="allow-forms allow-scripts",t.srcdoc=e.tdsMethod,t.style.height="0px",t.style.width="0px",document.body.appendChild(t)),e.sec3dform&&!e.tdsMethod||((t=c(e)).target="pay-frame",t.submit()),e.listener&&!s&&(window.addEventListener("message",l),s=!0),i=e},a.init=function(){window.pageData.restore&&n.ui.restore.load("/payment/restore",u)},e})(app,make),app.payment.ecommerce=new App.Payment.ECommerce,make.queue.add(app.payment.ecommerce.init.bind(app.payment.ecommerce)),App.Payment.Paypal=(function(n,a){function e(){this.type="paypal"}var t=e.prototype,r=a.ajax,i=n.$,o="book-btn";function s(){var e=n.getBookForm();a.form.set(e.elements.payment_type,"paypal"),n.payment.setType("paypal"),e.elements.PayerID&&n.book.confirm()}return t.checkout=function(e){var t="paypal-checkout",e=(r.post(e),r.queue(function(){var e=r.getJSON(t);1===e.flag?a.app.nav("https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token="+e.token,"Loading Paypal."):a.alert(e.flag,e.msg)},t),n.rate.room);n.rate.room!==n.rate.name&&(e+=" - "+n.rate.name),r.loadJSON(n.router.getUrl("paypal/checkout",{htl_code:n.rate.htl_code,desc:e}),t,"Redirecting to Paypal.")},t.init=function(){a.app.uri.queryKey.paypal&&n.getBookForm().elements.token&&n.ui.restore.load("/paypal/restore",s)},t.validate=function(){return!0},t.load=function(){n.isFull()&&2===n.step&&(i(o).onclick=n.book.confirmPaypal)},t.unload=function(){i(o).onclick=n.book.confirm},e})(app,make),app.payment.paypal=new App.Payment.Paypal,make.queue.add(app.payment.paypal.init.bind(app.payment.paypal)),App.Payment.Scalapay=(function(n,a){function e(){this.type="scalapay"}var t=e.prototype,r=a.ajax,i=n.$,o="book-btn";function s(){var e=n.getBookForm();a.form.set(e.elements.payment_type,"scalapay"),n.payment.setType("scalapay"),e.elements.orderToken&&n.book.confirm()}return t.checkout=function(e){var t="scalapay-checkout",e=(r.post(e),r.queue(function(){var e=r.getJSON(t);1===e.flag?a.app.nav(e.checkoutUrl,"Loading Scalapay."):a.alert(e.flag,e.msg)},t),n.rate.room);n.rate.room!==n.rate.name&&(e+=" - "+n.rate.name),r.loadJSON(n.router.getUrl("scalapay/checkout",{htl_code:n.rate.htl_code,desc:e}),t,"Redirecting to Scalapay.")},t.init=function(){a.app.uri.queryKey.scalapay&&n.getBookForm().elements.orderToken&&n.ui.restore.load("/scalapay/restore",s)},t.validate=function(){return!0},t.load=function(){n.isFull()&&2===n.step&&(i(o).onclick=n.book.confirmScalapay)},t.unload=function(){i(o).onclick=n.book.confirm},e})(app,make),app.payment.scalapay=new App.Payment.Scalapay,make.queue.add(app.payment.scalapay.init.bind(app.payment.scalapay)),App.Payment.Bank=(function(e){function t(){this.type="bank"}var n=t.prototype,a=null;return n.load=function(){e.isFull()&&2===e.step&&((a=e.$("bank-set")).style.display="block")},n.unload=function(){null!==a&&(a.style.display="none",a=null)},n.validate=function(){return!0},t})(app),app.payment.bank=new App.Payment.Bank,App.Payment.Checkin=(function(){function e(){this.type="checkin"}var t=e.prototype;return t.load=function(){},t.unload=function(){},t.validate=function(){return!0},e})(),app.payment.checkin=new App.Payment.Checkin,App.Payment.Checkout=(function(){function e(){this.type="checkout"}var t=e.prototype,n=function(){};return t.load=n,t.unload=n,t.validate=function(){return!0},e})(),app.payment.checkout=new App.Payment.Checkout,App.Payment.VASID=(function(t,n){function e(){this.type="vasid"}var a=e.prototype;return a.load=function(){},a.unload=function(){},a.validate=function(){return!0},a.process=function(e){t.payment.ecommerce.redirectingMsg(),e.fields?t.payment.ecommerce.process(e):e.redirectURL?document.location=e.redirectURL:n.alert(2,"Unknown error occurred.")},e})(app,make),app.payment.vasid=new App.Payment.VASID,App.Book=(function(i){function e(){this.total=0,this.deposit=0}var t=e.prototype,n=make.ajax,a=make.modal,r="book-act";function o(){var e=i.rate,t=i.extras.subtotal-i.extras.commission;this.total=e.price+t,this.deposit=e.payment_deposit,e.payment_full&&0<t&&(this.deposit=Math.max(0,this.total-e.credit)),2===i.step&&((t=i.getBookForm()).elements.price.value=this.total.toFixed(2),t.elements.deposit.value=this.deposit.toFixed(2),t.elements.currency.value=e.currency,i.ui.checkout.setTotal(this.total,this.deposit,e.currency),i.ui.ta.renderCheckout())}function s(){var e=n.getJSON(r);e.sec3d?i.payment.ecommerce.secure3d(e):1<e.flag?(make.alert(e.flag,e.msg),4===e.flag&&make.$("make-alert")&&a.onClose("make-alert",function(){i.avl.setDirty(),i.setStep(1)}),i.events.bookError.fire(e.msg)):"ecommerce"===e.payment?i.payment.ecommerce.process(e):"vasid"===e.payment?i.payment.vasid.process(e):i.retrieval.load(e.res_id,e.email)}function l(e,t){if(i.validate.personal(e,t)&&i.payment.validate(e,t)&&(null===i.extras.minimum||i.extras.validateMin(e,t))&&i.transfers.validate(e,t)&&i.preferences.validate(e,t)){for(var n=e.elements,a=0,r=n.length;a<r;a+=1)if(n[a].hasAttribute("maxlength")&&n[a].value&&n[a].value.length>n[a].getAttribute("maxlength")|0)return n[a].value=n[a].value.substr(0,0|n[a].getAttribute("maxlength")),make.form.error("Field value exceeds max allowed length.",n[a]);return n.accept.checked||make.form.error(lang.book_terms_error,e.elements.accept)}}return t.getDeposit=function(){return this.deposit},t.getTotal=function(){return this.total},t.confirm=function(){var e=i.getBookForm();l(e,i.rate)&&(e.ua_width.value=window.innerWidth,e.ua_height.value=window.innerHeight,e.ua_timezone_offset.value=(new Date).getTimezoneOffset(),n.post(e),n.queue(s,r),n.loadJSON("/book",r,lang.book_confirming))},t.confirmPaypal=function(){var e=i.getBookForm();l(e,i.rate)&&i.payment.paypal.checkout(e)},t.confirmScalapay=function(){var e=i.getBookForm();l(e,i.rate)&&i.payment.scalapay.checkout(e)},t.init=function(){i.isFull()&&i.events.price.subscribe(o,this,!0)},e})(app),app.book=new App.Book,make.queue.add(app.book.init.bind(app.book)),App.Amend=(function(i,a){function e(){this.htl_code="",this.res_id=0,this.email="",this.ta=0,this.corp=0}var t=e.prototype;function o(){d.checkResult(c)&&(p.closeAll(),i.retrieval.reload())}function s(e,t){return(t=t||{}).htl_code=i.amend.getProperty(),t.res_id=i.amend.getResId(),t.email=i.amend.getEmail(),i.router.getUrl("amend/amend-"+e,t)}function r(e){return e.email_confirm_guest.checked&&e.email_confirm_hotelier.checked?"BOTH":e.email_confirm_guest.checked?"GUEST":e.email_confirm_hotelier.checked?"HOTELIER":"NONE"}function l(e){var t=document.forms["amend-settings-frm"];void 0!==t&&(e.email_confirm.value=r(t))}t.getResIdStr=function(){return(1e7+this.res_id).toString()},t.getResSign=function(){return{htl_code:this.htl_code,res_id:this.res_id,email:this.email}},t.getProperty=function(){return this.htl_code},t.getResId=function(){return this.res_id},t.getEmail=function(){return this.email},t.isCancelled=function(){return 0===this.status},t.load=function(e){var t,n;this.res_id=e.res_id,this.email=e.email,this.status=e.status,this.htl_code=e.htl_code,this.ta=e.ta||0,this.corp=e.corp||0,!0===e.trackConversion&&(n="conversion-tracking-frame",null!==(t=document.getElementById(n))&&t.parentNode.removeChild(t),(t=document.createElement("iframe")).id=n,t.frameborder="0",t.scrolling="no",t.width=1,t.height=1,(n=new URL(new URL(document.location.href).origin)).pathname="/track/conversion",n.searchParams.set("res_id",e.res_id),n.searchParams.set("email",e.email),n.searchParams.set("htl_code",e.htl_code),t.src=n.toString(),t.addEventListener("load",function(){setTimeout(function(){i.events.conversionTrackingDone.fire({res_id:e.res_id+1e7,email:e.email,htl_code:e.htl_code})},500)}),document.body.appendChild(t)),i.$("book-area").innerHTML=e.html,i.setStep(3),i.history.booking(),a.app.uri.queryKey.view&&"cc"===a.app.uri.queryKey.view&&0!==e.status&&i.ui.reservation.amend()};var c="amend-req",u="amend-preview",d=a.ajax,p=a.modal,m=a.form,f=i.loading;return t.stay=function(e,t,n){var a,r=e.elements;return m.has(r.fromd)?(a=i.getDate(r.fromd),i.avl.dateWithinRange(a,r.fromd)?(r.checkin.value=a.iso(),parseInt(r.adults.value)+parseInt(r.children.value)>parseInt(r.max_pers.value)?m.error("This room cannot have more than "+r.max_pers.value+" guests.",r.adults):(d.post(e),t?(d.queue(o,c),d.loadJSON(s("stay",{confirm:!0,price:n}),c,f)):d.load(s("stay"),u,f),!1)):m.error("Invalid check-in date.",r.fromd)):m.error(lang.enter_checkin,r.fromd)},t.stayConfirm=function(e){var t=document.forms["amend-stay-frm"];l(t),this.stay(t,!0,e)},t.rate=function(e,t,n){t?(void 0!==(t=document.forms["amend-settings-frm"])?d.post({email_confirm:r(t)}):d.post({}),p.close(),d.queue(o,c),d.loadJSON(s("rate",{rate_id:e,confirm:!0,price:n}),c,f)):d.load(s("rate",{rate_id:e}),u,f)},t.info=function(e){return i.validate.personal(e)&&(d.post(e),d.queue(function(){1===d.getJSON(c).flag&&i.amend.email!==e.email.value&&(i.amend.email=e.email.value.trim()),o()},c),d.loadJSON(s("personal"),c,f)),!1},t.pay=function(e){return i.payment.creditcard.validate(e)&&(d.post(e),d.queue(o,c),d.loadJSON(s("payment"),c,f)),!1},t.pref=function(e){return i.preferences.validate(e,i.rate)&&(d.post(e),d.queue(o,c),d.loadJSON(s("preferences"),c,f)),!1},t.extras=function(e,t,n){return l(e),d.post(e),t?(p.close(),d.queue(o,c),d.loadJSON(s("extras",{confirm:!0,price:n}),c,f)):d.load(s("extras"),u,f),!1},t.creditvoucher=function(e,t,n){var a=e.voucher.value.trim();return a.length?(a={voucher:a},void 0!==e.email_confirm&&(a.email_confirm=e.email_confirm.value),d.post(a),t?(p.close(),d.queue(o,c),d.loadJSON(s("credit-voucher",{confirm:!0,price:n}),c,f)):d.load(s("credit-voucher"),u,f),!1):m.error("Please type your credit voucher's code.",e.voucher)},t.creditvoucherConfirm=function(e){var t=document.forms["credit-voucher-frm"];l(t),this.creditvoucher(t,!0,e)},e})(app,make),app.amend=new App.Amend,App.Cancel=(function(n,a){function e(){}var t=e.prototype,r=a.ajax,i="cancel-req";function o(){r.checkResult(i)&&(gtag("event","refund",{transaction_id:n.amend.getResIdStr()}),void 0!==window.gtmDataLayer&&(window.gtmDataLayer.push({ecommerce:null}),window.gtmDataLayer.push({event:"refund",ecommerce:{transaction_id:n.amend.getResIdStr()}})),n.ui.reservation.cancelClose(),n.retrieval.reload())}return t.request=function(e,t){e.accept_policy.checked?!0!==t||a.form.has(e.remarks)?(t=n.router.getUrl("cancel/confirm",n.amend.getResSign()),r.post(e),r.queue(o,i),r.loadJSON(t,i,n.loading)):a.form.error(lang.cancel_reason_missing,e.remarks):a.form.error(lang.book_terms_error,e.accept_policy)},e})(app,make),app.cancel=new App.Cancel,App.FB=(function(a){function e(){}var n,t=e.prototype,r=!1;return t.load=function(){var e,t;return void 0===n&&((e=document.createElement("div")).id="fb-root",(t=document.querySelector(".page-wrap"))&&t.appendChild(e),n=new Promise(function(e,t){var n="https://connect.facebook.net/"+a.getLocale()+(r?"/sdk/xfbml.customerchat.js":"/sdk.js");window.fbAsyncInit=function(){FB.init({appId:"1034954324298256",version:"v18.0"}),FB.XFBML.parse(),e()},loadJS(n).catch(t)})),n},t.initChat=function(e){var t;void 0!==e.page_id&&(r=!0,(t=document.createElement("div")).className="fb-customerchat",t.setAttribute("page_id",e.page_id),void 0!==e.theme_color&&t.setAttribute("theme_color",e.theme_color),document.body.appendChild(t))},e})(app),app.fb=new App.FB,App.Loyalty=(function(n,a){function e(){this.logged=!1,this.email=null,this.name=null,this.profileUrl=null,this.id=0}var t=e.prototype,r=n.ajax,i="loyalty-act";function o(e){return!(-1<["login","loyalty","smartguest"].indexOf(e)&&(a.ui.loyalty.open(),1))}function s(e,t){a.tracking.trackEvent("SmartGuest",e,t)}function l(e){if(void 0===e.id)if(e.method&&s("LoginFailed",e.method),e.registrationUrl)n.app.nav(e.registrationUrl,"Loading loyalty.");else{if(n.modal.top){var t=n.$1("input[name=pin]",n.modal.top);if(t){if(2!==e.flag)return n.form.error(e.msg,t);n.modal.close()}}n.alert(e.flag,e.msg)}else{t=a.loyalty;t.logged=!0,t.email=e.email,t.id=e.id,e.profileUrl&&(t.profileUrl=e.profileUrl),e.method&&s("LoginSuccess",e.method),e.name&&(t.name=e.name),a.ui.loyalty.enable(!0===e.auto),a.avl.hasRun()?a.avl.run():window.pageData.avl&&wh("config","avl.run")}}return t.init=function(){var e;a.isFull()&&(a.events.view.subscribe(o),(e=window.pageData).smartguest)&&l(e.smartguest)},t.login=function(e){var t;return a.validate.loyaltyLogin(e)&&(t=n.modal.top,e.elements.params.value=a.getCurrentParams(),r.post(e),r.load(e.action,i,"Sending PIN."),n.modal.close(t),s("LoginAttempt","PIN")),!1},t.pin=function(e){return a.validate.loyaltyPin(e)&&(r.post(e),r.queue(function(){l(r.getJSON(i))},i),r.loadJSON(e.action,i,"Signing in.")),!1},t.logout=function(){a.loyalty.logged=!1,a.ui.loyalty.disable(),r.queue(function(){a.avl.hasRun()&&a.avl.run()},i),r.loadJSON("/loyalty/logout",i,"Signing out.")},t.socialLogin=function(e){r.post(e),r.queue(function(){l(r.getJSON(i))},i),r.loadJSON("/loyalty/login",i,"Signing in.")},e})(make,app),app.loyalty=new App.Loyalty,make.queue.add(app.loyalty.init.bind(app.loyalty)),App.TravelAgent=(function(a,r){function e(){this.logged=!1,this.enabled=!1,this.name="",this.id=0}var t=e.prototype,n=a.ajax,i=a.modal,o="ta-act";function s(e){return"ta"!==e||(r.ui.ta.login(),!1)}function l(e,t){var n;1!==e.flag&&(a.alert(e.flag,e.msg),4!==e.flag)||(t||i.close("modal-ta"),e.applyHtml&&i.open({id:"apply-ta",contents:e.applyHtml,allowClose:!0}),t=e,(n=r.ta).logged=!0,n.enabled=t.enabled,n.name=t.name,n.id=t.id,r.ui.ta.enable(e.html),(n=r.getAvlForm()).elements.cur_iso&&(n.elements.cur_iso.value=pageData.currency),e.enabled?c():r.avl.hasRun()&&(r.ui.avl.getRoomBox().innerHTML=""),r.events.ta.fire(!0))}function c(){r.avl.hasRun()&&r.avl.run()}return t.init=function(){var e;r.isFull()&&(r.events.view.subscribe(s),(e=window.pageData).ta)&&l(e.ta,!0)},t.getId=function(){return this.id},t.login=function(e){return r.validate.agentLogin(e)&&(n.post(e),n.queue(function(){l(n.getJSON(o))},o),n.loadJSON(e.action,o,"Signing in.")),!1},t.logout=function(){var e="ta-logout";n.queue(function(){r.ta.logged=!1,r.ta.enabled=!1,r.ui.ta.disable(),r.events.ta.fire(!1),c()},e),n.loadJSON("/agent/logout",e,"Logging out.")},t.nationality=function(e){var t="nationality-apply";return n.queue(function(){var e=n.getJSON(t);if(1!==e.flag)return n.checkResult(t);document.getElementById("guest-nationality").innerHTML='<a href="javascript:app.ui.ta.nationality()" title="Click to change guest nationality">Guest Nationality</a>: '+e.nationality,a.modal.close(),r.avl.hasRun()&&r.avl.run()},t),n.post(e),n.loadJSON("/nationality",t,"Applying new nationality settings."),!1},e})(make,app),app.ta=new App.TravelAgent,make.queue.add(app.ta.init.bind(app.ta)),App.Corporate=(function(a,r){function e(){this.logged=!1,this.enabled=!1,this.name="",this.id=0}var t=e.prototype,n=a.ajax,i=a.modal,o="corp-act";function s(e){return"corp"!==e||(r.ui.corp.login(),!1)}function l(e,t){var n;1!==e.flag&&(a.alert(e.flag,e.msg),4!==e.flag)||(t||i.close("modal-corp"),e.applyHtml&&i.open({id:"apply-corp",contents:e.applyHtml,allowClose:!0}),t=e,(n=r.corp).logged=!0,n.enabled=t.enabled,n.name=t.name,n.id=t.id,r.ui.corp.enable(e.html),(n=r.getAvlForm()).elements.cur_iso&&(n.elements.cur_iso.value=pageData.currency),e.enabled?c():r.avl.hasRun()&&(r.ui.avl.getRoomBox().innerHTML=""),r.events.corp.fire(!0))}function c(){r.avl.hasRun()&&r.avl.run()}return t.init=function(){var e;r.isFull()&&(r.events.view.subscribe(s),(e=window.pageData).corp)&&l(e.corp,!0)},t.getId=function(){return this.id},t.login=function(e){return r.validate.agentLogin(e)&&(n.post(e),n.queue(function(){l(n.getJSON(o))},o),n.loadJSON(e.action,o,"Signing in.")),!1},t.logout=function(){var e="corp-logout";n.queue(function(){r.corp.logged=!1,r.corp.enabled=!1,r.ui.corp.disable(),r.events.corp.fire(!1),c()},e),n.loadJSON("/corp/logout",e,"Logging out.")},e})(make,app),app.corp=new App.Corporate,make.queue.add(app.corp.init.bind(app.corp)),App.Offers=(function(i,o){function e(){}var t=e.prototype,s=i.ajax,l=i.form,c="offers-act";function n(e){return"offers"!==e||(s.load("/offers",c,o.loading),!1)}function a(){var e,t,n,a=s.getJSON(c),r=o.getAvlForm().elements;a.id?(r.offerid.value=a.id,e=Date.parseIso(a.fromd),l.has(r.fromd)?(t=Date.parseIso(a.tod),void 0!==a.min_stay&&t.dayAdd(-a.min_stay),(n=Date.parsels(r.fromd.value))<=e?l.set(r.fromd,e):t<n&&l.set(r.fromd,t)):l.set(r.fromd,e>i.app.today?e:i.app.today),void 0!==a.min_stay?o.ui.avl.setNights(a.min_stay):r.tod&&o.ui.avl.dateChange(),void 0!==a.rooms&&(0|r.rooms.value)!==a.rooms&&(r.rooms.value=a.rooms),void 0!==a.adults&&(0|r.adults.value)!==a.adults&&(r.adults.value=a.adults),void 0!==a.children&&r.children&&(0|r.children.value)!==a.children&&(r.children.value=a.children),void 0!==a.infants&&r.infants&&(0|r.infants.value)!==a.infants&&(r.infants.value=a.infants),r.voucher.value=a.vch_code||"",a.bk_code?o.bkcode.set(a.bk_code):o.bkcode.isActive()?o.bkcode.disable():o.avl.run()):i.alert(2,"Offer not found or no longer active.")}return t.init=function(){o.isFull()&&o.events.view.subscribe(n)},t.applyOffer=function(e,t){i.modal.closeAll(),o.multi&&o.property!==t&&o.avl.setPropertyCode(t),s.queue(a,c),s.loadJSON("/offers?id="+e,c,o.loading)},t.reset=function(){var e=o.getAvlForm(),t=o.getAvlForm().elements;t.room&&e.removeChild(t.room),t.rate&&e.removeChild(t.rate),t.offerid&&(t.offerid.value=""),t.voucher.value.length&&(t.voucher.value=""),o.bkcode.isActive()?o.bkcode.disable():o.avl.run()},e})(make,app),app.offers=new App.Offers,make.queue.add(app.offers.init),App.PriceCheck=(function(n,a){var t="wh-price-widget",r=null,i=null,o=!1,s=!1,l=!1,c=!0;function e(){}var u,d=e.prototype;function p(e,t){s=1<t,w()}function m(){o=!1,w()}function f(e){var t;void 0!==u&&u.abort(),void 0!==e&&!l&&0<e.best&&(0<(t=a.avl.getParams()).children||("AbortController"in window&&(u=new AbortController),n.ajax.async("/rate-check",h,{type:"html",data:new n.Post({best:e.best,best_id:e.best_id,prive:e.prive,checkin:t.checkin.iso(),nights:t.nights,rooms:t.rooms,adults:t.adults}),error:y,signal:void 0!==u?u.signal:void 0,complete:function(){u=void 0}})))}function h(e){o=!0,i.innerHTML=e,v(),w()}function v(){r.style.top=Math.max(0,(dom.getViewportHeight()-r.offsetHeight)/2)+"px"}function g(){requestAnimationFrame(v)}function y(){o=!1,w()}function b(){l=a.ta.enabled||a.corp.enabled||a.bkcode.isActive(),w()}function k(){c=!c,w()}function w(){var e=[];!s&&o||e.push("hidden"),c&&o||e.push("minimized"),r.className=e.join(" ")}return d.init=function(){var e;a.isFull()&&!a.isMobile()&&!0===window.pageData.price_check.enabled&&((r=document.createElement("div")).id=t,(e=document.createElement("div")).className="title",e.innerHTML='<i class="fa fa-check-square-o"></i><span>'+lang.rate_check+'</span><i class="fa fa-chevron-down"></i>',(i=document.createElement("div")).className="content",r.appendChild(e),r.appendChild(i),document.body.appendChild(r),dom.event.delegate(".title","click",k,t),dom.event.add(window.top,"resize",g),w(),a.events.step.subscribe(p),a.events.avlBegin.subscribe(m),a.events.avl.subscribe(f),a.events.ta.subscribe(b),a.events.corp.subscribe(b),a.events.bkcode.subscribe(b))},d.openRate=function(e){var t=n.$1('tr[data-rate="'+e+'"] td.spec p.title a');if(t)try{t.click()}catch(e){}else a.avl.select(e)},e})(make,app),app.price_check=new App.PriceCheck,make.queue.add(app.price_check.init.bind(app.price_check)),App.Inquiry=(function(n){function e(){}var t=e.prototype,a=make.ajax,r=make.form,i="modal-inquiry",o="do-inquiry";function s(){1===a.getJSON(o).flag?(a.load("/inquiry/sent",i),n.events.inquirySent.fire()):a.checkResult(o)}function l(e){return"inquiry"!==e||void 0===window.pageData||!0!==window.pageData.inquiry||(this.launch(),!1)}return t.launch=function(){n.isFull()&&a.queue(function(){var e=n.getAvlForm().elements,t=document.forms["inquiry-frm"].elements;e.fromd.value.length&&(t.checkin.value=e.fromd.value),e.rooms&&(t.rooms.value=e.rooms.value),e.nights?t.nights.value=e.nights.value:e.tod&&e.tod.value.length&&e.fromd.value.length&&(t.nights.value=n.getDate(e.fromd).dayDiff(n.getDate(e.tod))),t.adults.value=e.adults.value,e.children&&t.children&&(t.children.value=e.children.value),e.infants&&t.infants&&(t.infants.value=e.infants.value)},i),a.load("/inquiry/",i)},t.submit=function(e){var t=e.elements;if(!r.has(t.checkin))return r.error(lang.enter_checkin,t.checkin);if(n.avl.dateWithinRange(n.getDate(t.checkin),t.checkin)){if(n.util.trimValues(e,"firstname,lastname,email,tel"),e.elements.email.value=e.elements.email.value.replace(/\s/g,""),!r.has(t.country))return r.error(lang.invalid_country,t.country);if(!r.has(t.firstname))return r.error(lang.invalid_firstname,t.firstname);if(!r.has(t.lastname))return r.error(lang.invalid_lastname,t.lastname);if(!r.has(t.email))return r.error(lang.invalid_email,t.email);if(t.tel&&t.tel.hasAttribute("required")&&!r.has(t.tel))return r.error(lang.invalid_tel,t.tel);a.post(e),a.queue(s,o),a.loadJSON("/inquiry/submit",o,"Submitting request.")}return!1},t.init=function(){n.isFull()&&n.events.view.subscribe(l,this,!0)},e})(app),app.inquiry=new App.Inquiry,make.queue.add(app.inquiry.init.bind(app.inquiry)),App.UI=(function(n,a,r){function e(){}var t=e.prototype,i=a.$,o=["https://www.reserve-online.net"];function s(e){if(o.includes(e.origin)){try{var t=JSON.parse(e.data)}catch(e){return}if(t.error)n.alert(2,t.error);else if(t.messageType)switch(t.messageType){case"google-auth":a.loyalty.socialLogin(t);break;case"facebook-auth":a.loyalty.socialLogin({fbtoken:t.fbtoken})}}}function l(){var e=a.getAvlForm();e.rate&&(e.rate.value=""),e.room&&(e.room.value=""),e.offer&&(e.offer.value=""),e.bk_code&&(e.bk_code.value=""),e.offerid&&(e.offerid.value="")}var c=!(t.init=function(){var e=window.pageData,t=n.app.uri.queryKey;a.isEngine()&&(a.step=1,a.isEmbedded()||(window.addEventListener&&window.addEventListener("message",s),t.view?a.events.view.fire(t.view):e.avl&&!a.bkcode.external&&(a.tracking.postpone(),wh("config","avl.run")),e.msg_popup&&wh(function(){setTimeout(function(){a.ui.popup.load(window.pageData.msg_popup)},1e3)}),e.msg_ticker&&a.ui.ticker("/ticker?ids="+e.msg_ticker),t.error&&n.alert(2,t.error),r.event.delegate("a","click",function(){var e=n.url.parse(this.href);if(e.host===document.location.host){var t=e.queryKey,e=Object.keys(t);if(1===e.length)switch(e[0]){case"offerid":return l(),a.offers.applyOffer(0|t.offerid),!1;case"voucher":return n.modal.closeAll(),a.getAvlForm().voucher.value=t.voucher,!(a.voucher.check=!0);case"bkcode":return n.modal.closeAll(),l(),a.bkcode.set(t.bkcode),!1}}return!0})))});return t.menuToggle=function(){i("mobile-menu").style.display=c?"none":"block",c=!c},t.menuClose=function(){c&&this.menuToggle()},e})(make,app,dom),app.ui=new App.UI,make.queue.add(app.ui.init.bind(app.ui)),App.UI.Lang=(function(t,n){function e(){}var a=e.prototype;return a.select=function(){t.ajax.load("/lang-select",null,n.loading)},a.set=function(e){t.app.nav("/lang?lcode="+e+"&path="+t.app.uri.path+"&"+n.getCurrentParams())},e})(make,app),app.ui.lang=new App.UI.Lang,app.ui.popup=(function(){function n(e,t){null!==r&&(1===t?r.style.display="block":1===e&&(r.style.display="none"))}var r=null;return{load:function(e){(r=document.createElement("div")).className="msg-popup";var t=document.createElement("a");t.innerHTML='<i class="fa fa-times"></i>',t.className="dismiss",t.href="javascript:app.ui.popup.dismiss()",r.appendChild(t),e.forEach(function(e){var t=document.createElement("div"),n=document.createElement("i"),a=document.createElement("a");t.className="msg-popup-item",n.className="fa fa-bell",a.innerHTML=e.title,a.setAttribute("data-behavior","modal"),a.href="/alert?id="+e.id,t.appendChild(n),t.appendChild(a),r.appendChild(t)}),document.body.appendChild(r),app.events.step.subscribe(n)},dismiss:function(){r.parentNode.removeChild(r),r=null}}})(),app.ui.ticker=(function(){var r=[],n=-1,a=!1,i=!1;function o(){var e=make.$1(".ticker blockquote"),t=new Anim(e,{opacity:{from:0,to:1}},1,Easing.easeOut);i=!0,(n+=1)>=r.length&&(n=0),e.innerHTML=r[n],t.onComplete.subscribe(function(){dom.setStyle(e,"opacity",1),setTimeout(function(){var e=new Anim(this,{opacity:{from:1,to:0}},1,Easing.easeOut);e.animate(),e.onComplete.subscribe(function(){a?i=!1:o()})}.bind(e),3e3)}),t.animate()}function s(e,t){1===t?(a=!1,i||o()):1===e&&(a=!0)}function t(e){var t=document.createElement("div"),n=(t.className="ticker",document.createElement("blockquote")),a=(t.appendChild(n),document.getElementById("app-msg").parentElement);a.insertBefore(t,a.firstChild),1<e.length?(r=e,app.events.step.subscribe(s),o()):n.innerHTML=e[0]}return function(e){make.ajax.async(e,t)}})(),App.UI.Pulldown=(function(){function e(){}var t=e.prototype,n="pull-down";return t.hide=function(){make.$(n).className="closed"},t.toggle=function(){make.$(n).className="open"},e})(),app.ui.pulldown=new App.UI.Pulldown,App.UI.ExitIntent=(function(e,t){function n(){}var a=n.prototype,r=e.modal,i=6e4,o=null;function s(){u(),r.open({id:"exit-intent",contents:'<div class="exit-intent"><div class="exit-intent-header"><i class="fa fa-bell"></i></div><div class="exit-intent-content user">'+pageData.exitIntent+'</div><div class="exit-intent-footer"><button type="button" class="prime" onclick="make.modal.close()">'+lang.ui.continue+"</button></div>",allowClose:!0,showClose:!0})}function l(e){e=e.relatedTarget||e.toElement;e&&"HTML"!=e.nodeName||s()}function c(){null!==o&&clearTimeout(o),o=setTimeout(s,i)}function u(){null!==o&&(clearTimeout(o),o=null),dom.event.remove(document,"mouseout",l),dom.event.remove(document,"keydown",c),dom.event.remove(document,"mousemove",c),t.events.step.unsubscribe(d,this,!0)}function d(e,t){1<t&&u()}return a.init=function(){t.isFull()&&(c(),e.on(document,"mouseout",l),e.on(document,"keydown",c),e.on(document,"mousemove",c),t.events.step.subscribe(d,this,!0))},n})(make,app),void 0!==pageData.exitIntent&&(app.ui.exitIntent=new App.UI.ExitIntent,make.queue.add(app.ui.exitIntent.init.bind(app.ui.exitIntent))),App.UI.Avl=(function(a,r,i){function e(){}var o,s,t=e.prototype,l=r.env,c=r.form,u=i.event,d=a.getDate,p=0,m=0,f=a.$,h=r.$1,v=r.$$,g=0,y=0,n="scrollBehavior"in document.documentElement.style,b=!1;function k(e,t){n?window.scroll({left:0,top:y,behavior:"smooth"}):window.scroll(0,y),y=-1}function w(){o.classList[1<parseInt(a.getAvlForm().elements.rooms.value)?"add":"remove"]("per")}function _(e){e&&u.stop(e);var e=Date.parseIso(this.getAttribute("data-date")),t=a.getAvlForm().elements;a.avl.dateWithinRange(e)&&(c.set(t.fromd,e),t.tod&&a.ui.avl.dateChange(),a.avl.run())}var x=!1;function A(){var e=i.getScrollTop(),t="avl-ghost",n=f(t);g<e?x||e<(g=i.getY(o)+38)||(null===n&&((n=document.createElement("div")).id=t,n.style.height=o.offsetHeight+"px",o.parentNode.insertBefore(n,o)),o.classList.add("fixed"),n.style.display="block",x=!x):x&&null!==n&&(o.classList.remove("fixed"),n.style.display="none",x=!x)}function C(){var e,t,n;b||(a.isMobile()||r.app.scroll.subscribe(A),e=(t=a.getAvlForm()).elements,t=Array.from(t.querySelectorAll("select")),n=a.avl.run.bind(a.avl),t.push(e.fromd),e.tod&&t.push(e.tod),r.on(t,"change",n),l.touch&&u.delegate("span[data-date]","touchend",_,s),u.delegate("span[data-date]","click",_,s),b=!0),v("td.photo",s).forEach(function(e){if(e.classList.contains("hotel"))e.firstElementChild.style.height=e.offsetHeight+"px";else for(var t=e.parentNode,n=e.rowSpan,a=0;a<n;a+=1){var r=h("td.spec",t),i=h("a",r),o=document.createElement("a");o.href=i.href,o.setAttribute("data-behavior","modal"),o.innerHTML='<i class="fa fa-arrow-right"></i>',o.style.height=r.offsetHeight+"px",e.appendChild(o),t=t.nextElementSibling}}),-1!==y&&setImmediate(k)}function E(e,t){1===t?(f("step-1").style.display="block",s.style.display="block",b&&!a.isMobile()&&(r.app.scroll.subscribe(A),r.app.scroll.fire()),-1!==y&&k()):1===e&&(a.isMobile()||r.app.scroll.unsubscribe(A),y=i.getScrollTop(),s.style.display="none",f("step-1").style.display="none")}function S(){p=d(this.form.elements.fromd).dayDiff(d(this))}t.forgetScroll=function(){y=0},t.getFormBox=function(){return o},t.getRoomBox=function(){return s},t.init=function(){var e,t;a.isEngine()&&(t=(e=a.getAvlForm()).elements,o=r.$1(".avl-form",e),s=f("rm-box"),t.rooms&&(r.on(t.rooms,"change",w),w()),t.tod&&(r.on(t.fromd,"change",this.dateChange),r.on(t.tod,"change",S),p=d(t.fromd).dayDiff(d(t.tod)),m=0|t.tod.getAttribute("data-nmax")),a.isEmbedded()||(a.events.step.subscribe(E),a.events.avl.subscribe(C)))},t.dateChange=function(){var e=a.getAvlForm().elements,t=d(e.fromd),n=d(e.tod);if("date"===e.tod.type?(e.tod.setAttribute("min",t.clone().dayAdd(1).iso()),e.tod.setAttribute("max",t.clone().dayAdd(m).iso())):(e.tod.setAttribute("data-min",t.clone().dayAdd(1).iso()),e.tod.setAttribute("data-max",t.clone().dayAdd(m).iso())),t<n){n=t.dayDiff(n);if(n<p)return void(p=n)}c.set(e.tod,t.dayAdd(p))},t.setNights=function(e){var t=a.getAvlForm().elements;p=e,t.nights?t.nights.value=p:t.tod&&c.set(t.tod,d(t.fromd).dayAdd(p))},t.earlySetDate=function(e){var e=Date.parseIso(e),t=a.getAvlForm().elements;c.set(t.fromd,e),t.tod&&a.ui.avl.dateChange(),a.avl.run()};var T=null;return t.selectCurrency=function(e){e&&(T=e),r.ajax.load("/currency-select",null,a.loading)},t.setCurrency=function(e){var t=a.getAvlForm().elements;c.set(t.cur_iso,e),T&&(T.innerHTML=e),r.modal.close(),a.avl.run()},e})(app,make,dom),app.ui.avl=new App.UI.Avl,make.queue.add(app.ui.avl.init.bind(app.ui.avl)),App.UI.Checkout=(function(s,y){function e(){}var l,t=e.prototype,b=y.$,k=s.$1,n=s.ajax,w=s.string.format,c=!1,d=!0;function u(){d&&(requestAnimationFrame(p),d=!1)}function p(){var e,t,n,a=b("summary"),r=b("book-data"),i=dom.getY(a),o=dom.getY(r),s=i-o,l=s,r=r.offsetHeight,c=a.offsetHeight,u=dom.getScrollTop();r<c||u<o?s=0:r<c+s?s=r-c:(t=u+(e=dom.getViewportHeight()),n=u-o,u<i?s=n:i+c<t&&(s=(i=o+r)<t?c+u<i?n:r-c:c<e?n:t-c-o)),s!==l&&(a.style.transform="translateY("+s+"px)"),d=!0}function a(e,t){var n,a,r,i,o;2===t?(b("step-2").style.display="block",t=y.rate,o=b("book-data"),c?Behavior.removeDynamic(o):c=!0,o.innerHTML=t.html,Behavior.applyDynamic(o),r=y.rate,t=y.getCurrencyFormat(r.getDisplayCurrency(),"code"),o=b("sum-preview"),r.avatar?(i=function(e){return"https://cdn.webhotelier.net/photos/"+e+"/"+r.avatar},o.style.display="block",o.innerHTML='<a data-behavior="modal" href="'+r.link+'&preview"><img src="'+i("w=390")+'" srcset="'+i("w=780:q=60")+' 2x" alt=""></a>'):o.style.display="none",i="",r.htltitle!==r.room&&(i+='<div class="text-center font-weight-bold">'+r.htltitle+"</div>"),i+='<div class="text-divider mt-1 mb-2" style="font-size:14px">',1<r.rooms&&(i+=r.rooms+' <span style="color:gray">&times;</span> '),i+=r.room+"</div><dl>",r.name!==r.room&&(i+="<dt>"+lang.rate+":</dt><dd>",8===r.type&&(i+='<i class="fa fa-heart-o" style="color:green"></i> '),i+=r.name,null!==r.board&&(i+='<br><span class="tooltip black mb-1"><i class="fa fa-'+r.board_icon+'"></i> '+r.board+"</span>"),r.free_cancel&&(i+='<br><span class="tooltip mb-1">'+lang.free_cancel+"!</span>"),i+="</dd>"),i=(i+="<dt>"+lang.checkin+":</dt><dd>"+r.checkin_full+"</dd>")+"<dt>"+lang.checkout+":</dt><dd>"+r.checkout_full,1<r.nights&&(i+="<br />("+r.nights+" "+lang.nights.toLowerCase()+")"),i+="</dd>","bed"!==r.unit_type?(i=(i+="<dt>"+lang.guests+":</dt><dd>")+r.adults+" "+(1==r.adults?lang.adult:lang.adults).toLowerCase(),0<r.children&&(i+="<br />"+r.children+" "+(1===r.children?lang.child:lang.children).toLowerCase()),0<r.infants&&(i+="<br />"+r.infants+" "+(1===r.infants?lang.infant:lang.infants).toLowerCase()),1<r.rooms&&(i+="<br />("+w(lang.per_room,r.unit).toLowerCase()+")"),i+="</dd>"):i+="<dt>"+lang.guests+":</dt><dd>"+r.rooms+"</dd>",i+="</dl>",b("sum-room").innerHTML=i,o=b("sum-rate-details"),r.description?(o.style.display="block",o.innerHTML=r.description):o.style.display="none",i=b("sum-taxes"),!y.ta.enabled&&0<r.tax?(k(".price",i).innerHTML='<i class="fa fa-info-circle"></i> <a href="/taxes?rate='+r.rate_id+"&checkin="+r.checkin.iso()+"&nights="+r.nights+'" data-behavior=modal>'+t.format(r.getConverted(r.tax))+"</a>",i.style.display="flex"):i.style.display="none",o=b("sum-charges"),0<r.excluded_charges_total?(n=y.getCurrencyFormat(r.currency,"symbol"),t=y.getCurrencyFormat(r.currency,"code"),a='<div class="summary-section">'+lang.excluded_charges+':</div><dl class="numeric"><dt>',r.excluded_charges.forEach(function(e,t){0<t&&(a+="<br />"),a+=e.title+'<br /><em style="color:gray">'+n.format(e.value),e.per_room&&(a+=" &times "+r.rooms+" "+(1===r.rooms?r.unit:r.units).toLowerCase()),e.per_adult&&e.per_child?a+=" &times "+(r.adults+r.children)+" "+lang.guests.toLowerCase():(e.per_adult&&(a+=" &times "+r.adults+" "+lang[1===r.adults?"adult":"adults"].toLowerCase()),e.per_child&&(a+=" &times "+r.children+" "+lang[1===r.children?"child":"children"].toLowerCase()),e.per_infant&&(a+=" &times "+r.infants+" "+lang[1===r.infants?"infant":"infants"].toLowerCase())),e.per_day&&(null!=e.days?(t=e.days.reduce(function(e,t){var n=Date.parsels(t.fromd),t=Date.parsels(t.tod);return n.dayDiff(t)+1+e},0),a+=" &times; "+t+" "+lang[1===t?"night":"nights"].toLowerCase(),e.days.forEach(function(e){var t=Date.parsels(e.fromd),e=Date.parsels(e.tod),n=t.dayDiff(e)+1;a+="<br>"+t.format(),1<n&&(a+=" &ndash; "+e.format())})):a+=" &times "+r.nights+" "+lang[1===r.nights?"night":"nights"].toLowerCase()),a+="</em>"}),a+='</dt><dd class="price sum">'+t.format(r.excluded_charges_total)+"</dd></dl>",o.style.display="block",o.innerHTML=a):o.style.display="none",window.scrollTo(0,0),y.isMobile()||(p(),s.app.scroll.subscribe(u)),i=window.pageData,l?(t=l.toJSON(),y.ui.restore.checkout(t),y.ui.restore.extras(t),y.ui.restore.preferences(t)):(y.rate.smartguest?y.ui.restore.profile(y.rate.smartguest):i.profile?y.ui.restore.profile(i.profile):y.ui.restore.clearLastProfile(),i.preferences&&y.ui.restore.preferences(i.preferences)),!0===i.book&&(i.book=!1,setImmediate(y.book.confirm))):2===e&&(l=new s.Post(y.getBookForm()),s.app.scroll.unsubscribe(u),b("step-2").style.display="none")}return t.summaryPos=u,t.terms=function(){var e="terms-modal",t=(n.queue(function(){b("sum-payment-policy").innerHTML=y.rate.payment_policy,b("sum-cancel-penalty").innerHTML=y.rate.cancel_penalty,b("sum-cancel-policy").innerHTML="<p>"+y.rate.cancel_policy+"</p>"},e),"/terms");return y.multi&&(t+="?property="+y.property),n.load(t,e,y.loading),!1},t.acceptTerms=function(){y.getBookForm().elements.accept.checked=!0,s.modal.close()},t.privacy=function(){return n.load("/privacy-policy"+(null!==y.property?"?property="+y.property:""),"privacy-policy",y.loading),!1},t.setTotal=function(e,t,n){var a,r,i=b("sum-deposit"),o=b("sum-notes"),s=b("sum-price"),l=b("sum-credit"),c=y.rate,u=c.credit,d=Math.max(0,e-u),p=y.getCurrencyFormat(c.getDisplayCurrency(),"code"),m=c.getConverted(d),f=c.getConverted(t),h=c.getConverted(c.stay),v=c.getConverted(u),g=b("sum-room-total"),g=(k(".price",g).innerHTML=p.format(h),c.credit?(l.classList.remove("d-none"),k(".price",l).innerHTML=p.format(-v)):l.classList.add("d-none"),k(".price",i));c.payment_actions&&u<e?(i.style.display="block",t?(g.classList.remove("zero"),t===e&&0===u?g.innerHTML="100%":e===c.stay&&0===u?g.innerHTML='<span class="symbol">('+Math.round(t/d*100)+"%)</span> "+p.format(f):g.innerHTML=p.format(f)):(g.classList.add("zero"),g.innerHTML='<i class="fa fa-check"></i> 0%')):i.style.display="none",null!==c.charged_in||null!==c.prices_in?(h='<p style="text-align:right;">'+lang.your_currency+":</p>",h=(h+='<p class="price big"><sup style="top:-0.25em;color:red">*</sup> '+p.format(m)+"</p>")+'<p style="text-align:right;margin-top:-1em;">'+lang.property_currency+":</p>",null!==c.charged_in?(a=(r=y.getCurrencyFormat(c.charged_in.iso,"code")).format(d*c.charged_in.rate)+" &cong; "+p.format(m),h+='<p class="price big">'+r.format(d*c.charged_in.rate)+"</p>"):(a=(r=y.getCurrencyFormat(n,"code")).format(d)+" &cong; "+p.format(m),h+='<p class="price big">'+r.format(d)+"</p>"),s.innerHTML=h,o.innerHTML='<p><span style="color:red">*</span> '+w(lang.exchange_note,c.htltitle)+":<br><b>"+a+"</b></p><p>"+lang.exchange_warning+"</p>"):(s.innerHTML='<p class="price big">'+p.format(m)+"</p>",o.innerHTML="")},t.init=function(){y.isFull()&&y.events.step.subscribe(a,this,!0)},t.toggleInvoice=function(e){var t=2<y.step?"invoice-set-amend":"invoice-set";b(t).style.display=e.checked?"block":"none"},e})(make,app),app.ui.checkout=new App.UI.Checkout,make.queue.add(app.ui.checkout.init.bind(app.ui.checkout)),App.UI.Restore=(function(i,o){function e(){this.data=null}var t=e.prototype;function r(e,t){i.events.rate.unsubscribe(r,t),i.ui.restore.extras(t),i.ui.restore.preferences(t)}t.load=function(e,t){var n=o.ajax,a="checkout-restore";n.queue(function(){var e=n.getJSON(a);e.error?o.alert(2,e.error):(i.events.rate.subscribe(r,e),i.ui.restore.avl(e),n.queue(function(){void 0!==n.getJSON(a).flag?i.events.rate.unsubscribe(r,e):(i.ui.restore.checkout(e),.01<=Math.abs(i.book.total-parseFloat(e.price))||.01<=Math.abs(i.book.deposit-parseFloat(e.deposit))?(o.alert(2,"Pricing has changed. Payment and booking aborted."),i.avl.setDirty(),i.setStep(1)):t())},"rate-select-ajax"),i.avl.select(e.rate_id,e.htl_code))},a),n.loadJSON(e,a,"Restoring state")},t.avl=function(e){var t=i.getAvlForm(),n=i.avl.setParam.bind(i.avl),a=o.form,r=(n("checkin",Date.parsels(e.fromd)),n("rooms",0|e.rooms),n("nights",0|e.nights),n("adults",0|e.adults),n("children",0|e.children),n("infants",0|e.infants),i.avl.params),t=t.elements;a.set(t.fromd,r.checkin),t.adults.value=e.adults,t.rooms&&(t.rooms.value=e.rooms),t.children&&(t.children.value=e.children),t.infants&&(t.infants.value=e.infants),t.bk_code.value=e.bk_code,i.getBookForm().elements.bk_code.value=e.bk_code,i.ui.avl.setNights(r.nights),e.voucher&&n("voucher",e.voucher)},t.checkout=function(e){var t=i.getBookForm().elements;t.firstname.value=e.firstname,t.lastname.value=e.lastname,t.email.readOnly||(t.email.value=e.email),t.tel.value=e.tel,t.country.value=e.country,t.location&&(t.location.value=e.location,t.address.value=e.address,t.postal.value=e.postal,t.region.value=e.region,t.company&&(t.company.value=e.company),t.purpose&&(t.purpose.value=e.purpose),t.remarks)&&(t.remarks.value=e.remarks),t.invoice_fields_enabled&&e.invoice_fields_enabled&&(document.getElementById("invoice-set").style.display="block",t.invoice_fields_enabled.checked=!0,t.inv_cmp_name.value=e.inv_cmp_name,t.inv_tax_id.value=e.inv_tax_id,t.inv_country.value=e.inv_country,t.inv_tel.value=e.inv_tel,t.inv_address.value=e.inv_address,t.inv_postal.value=e.inv_postal,t.inv_location.value=e.inv_location,t.inv_region.value=e.inv_region),e.arrival_date&&t.arrival_date&&(t.arrival_date.value=e.arrival_date,t.arrival_time.value=e.arrival_time,t.arrival_details.value=e.arrival_details,t.departure_date.value=e.departure_date,t.departure_time.value=e.departure_time,t.departure_details.value=e.departure_details),e.cardnumber&&t.cardtype&&(t.cardname.value=e.cardname,t.cardnumber.value=e.cardnumber,t.cardyear.value=e.cardyear,t.cardmonth.value=e.cardmonth,e.cardcvv&&t.cardcvv&&(t.cardcvv.value=e.cardcvv),e.issue_no)&&t.issue_no&&(t.issue_no.value=e.issue_no),t.accept.checked=e.accept};var n=-1;return t.clearLastProfile=function(){n=-1},t.profile=function(e){var t;n!==e.id&&(n=e.id,t=i.getBookForm().elements,e.first_name&&!t.firstname.value.length&&(t.firstname.value=e.first_name),e.last_name&&!t.lastname.value.length&&(t.lastname.value=e.last_name),e.email&&!t.email.value.length&&(t.email.value=e.email),e.tel&&!t.tel.value.length&&(t.tel.value=e.tel),e.country&&(t.country.value=e.country),e.address&&!t.address.value.length&&(t.address.value=e.address),e.postal&&!t.postal.value.length&&(t.postal.value=e.postal),e.location&&!t.location.value.length&&(t.location.value=e.location),e.region&&!t.region.value.length&&(t.region.value=e.region),e.company)&&!t.company.value.length&&(t.company.value=e.company)},t.extras=function(n){var a,r;null!==i.rate.extras&&(a=i.getBookForm(),r=!1,Object.keys(n).forEach(function(e){var t;0<=e.indexOf("extra_")&&(t=a.elements[e])&&(r=!0,"checkbox"===t.type?t.checked=!0:t.value=n[e])}),r)&&i.events.extras.fire()},t.preferences=function(n){var a;null!==i.rate.preferences&&(a=i.getBookForm(),Object.keys(n).forEach(function(e){var t;0<=e.indexOf("pref_")&&(t=a.elements[e])&&(t.type&&"checkbox"===t.type?t.checked=!0:o.form.set(t,n[e]))}))},e})(app,make),app.ui.restore=new App.UI.Restore,App.UI.Extras=(function(c){function e(){}var t=e.prototype,i=c.$,n=!1;function u(e){return c.extras.get(e)}function d(t){v(f(t),0),c.extras.extras.forEach(function(e){e.deps.includes(t)&&0<h(f(e.id))&&d(e.id)})}function p(e,t){var n=u(e),a=n.excl,r=n.deps;if(0<t){for(var i=0;i<a.length;i+=1){var o=a[i];0<h(f(o))&&d(o)}for(i=0;i<r.length;i+=1){var s=r[i],l=f(s);0===h(l)&&(v(l,1),p(s,1))}}else d(e);c.extras.extras.forEach(function(e){m(e.id).className=e.excl.some(function(e){return 0<h(f(e))})?"excl":""})}function m(e){var t=3===c.step?"amend-extra-":"extra-";return i(t+e)}function f(e){return make.$1("input",m(e))}function h(e){return e?"checkbox"===e.type?e.checked?1:0:parseInt(e.value,10):0}function v(e,t){"checkbox"===e.type?e.checked=0<t:e.value=t.toString()}function a(){p(parseInt(this.name.split("_").pop()),h(this)),c.events.extras.fire()}function r(e,t){1<t&&!n&&(dom.event.delegate("table.extras input.text","change",a),dom.event.delegate("table.extras input[type=checkbox]","click",a),n=!0)}return t.render=function(e){if(e.forEach(function(e){var t,n=e.id,a=e.price,r=e.qty,i=e.defaultPrice,e=e.commission;null!==(n=m(n))&&(n=make.$1(".val.total",n),t=c.getCurrencyFormat(c.rate.getDisplayCurrency()),null!==c.rate.prices_in&&(a=c.rate.getConverted(a),e=c.rate.getConverted(e),i=c.rate.getConverted(i)),0<r?(n.className="val total",n.innerHTML=0<a?t.format(a-e):t.format(0)):(n.className="val total noqty",n.innerHTML=0<i?t.format(i):t.format(0)),n.nextElementSibling.innerHTML=e?'<span class="savings">margin: '+t.format(e)+"</span>":"")}),2===c.step){var t="sum-extras",n="sum-extras-total";if(e.length){var a,r=[];if(e.forEach(function(e){0<e.qty&&r.push('<i class="fa fa-check"></i> '+(1<e.qty?e.qty+" &times; ":"")+e.name)}),r.length)return e=c.getCurrencyFormat(c.rate.getDisplayCurrency(),"code"),a=c.rate.getConverted(c.extras.price-c.extras.commission),i(t).style.display="block",i(n).style.display="flex",make.$1(".price",n).innerHTML=e.format(a),void(i(t+"-desc").innerHTML=r.join("<br />"))}i(t).style.display="none",i(n).style.display="none"}},t.init=function(){c.isFull()&&c.events.step.subscribe(r)},t.add=function(e,t){var n=u(e),a=f(e),t=h(a)+t,n=n.max||t;0<=t&&t<=n&&(p(e,a.value=t),c.events.extras.fire())},t.getInput=f,t.getValue=function(e){return h(f(e))},e})(app),app.ui.extras=new App.UI.Extras,make.queue.add(app.ui.extras.init.bind(app.ui.extras)),App.UI.Reservation=(function(a,t){function e(){}var n=e.prototype,r=a.$,i=t.ajax,o=t.modal,s=(n.startOver=function(){a.history.resetAll(),a.setStep(1)},"cancel-modal"),l=a.loading;function c(e,t){var n="amend-"+("amend"===e?"list":"options");t&&i.queue(t,n),i.load(a.router.getUrl(e,a.amend.getResSign()),n,l)}function u(){return r("step-3")}function d(e,t){3===t?(u().style.display="block",window.scrollTo(0,0),t=!a.amend.isCancelled(),r("amend-btn").disabled=!t,r("cnl-btn").disabled=!t):3===e&&(u().style.display="none")}return n.cancel=function(){i.load(a.router.getUrl("cancel/prompt",a.amend.getResSign()),s)},n.cancelClose=function(){o.close(s)},n.amend=function(){var e="rate-load";i.queue(function(){a.rate=new App.Rate(i.getJSON(e)),t.app.uri.queryKey.view&&"cc"===t.app.uri.queryKey.view?(t.app.uri.queryKey.view=null,a.ui.reservation.pay()):c("amend/options")},"rate-load"),i.loadJSON(a.router.getUrl("amend/ratedata",a.amend.getResSign()),e,l)},n.stay=function(){c("amend/stay")},n.rate=function(){c("amend/rate")},n.extras=function(){c("amend/extras",function(){a.extras.load(a.rate.getExtras()),a.events.extras.fire()})},n.pref=function(){c("amend/prefs")},n.info=function(){c("amend/personal")},n.pay=function(){c("amend/pay")},n.credit_voucher=function(){c("amend/credit-voucher")},n.init=function(){a.isFull()&&a.events.step.subscribe(d)},n.print=function(e){u().classList[e?"add":"remove"]("voucher"),window.print()},e})(app,make),app.ui.reservation=new App.UI.Reservation,make.queue.add(app.ui.reservation.init.bind(app.ui.reservation)),App.UI.Loyalty=(function(n,a){function e(){}var t=e.prototype,r=a.$,i=n.modal,o=n.ajax,s="loyalty-btn";return t.open=function(){1!==a.step&&a.setStep(1),a.ta.logged?a.ta.logout():a.corp.logged&&a.corp.logout(),a.loyalty.profileUrl?n.app.nav(a.loyalty.profileUrl,"Loading your profile."):a.loyalty.logged?o.load("/loyalty/profile","modal-loyalty",a.loading):this.login()},t.login=function(){o.load("/loyalty/","modal-loyalty",a.loading)},t.enable=function(e){var t=a.loyalty.name||a.loyalty.email;for(r(s).innerHTML='<span role="presentation" class="fa fa-user"></span> '+t;i.top;)i.close();a.ui.menuClose(),e?n.notify(1,t):n.modal.open({allowClose:!0,showClose:!1,type:"smartguest-modal",contents:"<div><h1>"+pageData.loyalty.title+"</h1><h3>"+t+'</h3><svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 40 40" class="svg-success" fill="rgba(0, 100, 0, 0)"><path d="m16.6 28.4l15-15-2.3-2.5-12.7 12.7-5.9-5.9-2.3 2.3z m3.4-25c9.2 0 16.6 7.4 16.6 16.6s-7.4 16.6-16.6 16.6-16.6-7.4-16.6-16.6 7.4-16.6 16.6-16.6z"></path></svg><button class="success" style="font-size:16px;line-height:2em" type="button" onclick="make.modal.close()">'+lang.ui.continue+"</button></div>"})},t.disable=function(){r(s).innerHTML='<span role=presentation class="fa fa-heart"></span> '+pageData.loyalty.prompt,i.closeAll(),a.ui.menuClose()},e})(make,app),app.ui.loyalty=new App.UI.Loyalty,App.UI.TravelAgent=(function(r,i){function e(){}var t=e.prototype,o=i.$,n=r.ajax,a="modal-ta",s="ta-msg";return t.login=function(e){1!==i.step&&i.setStep(1),i.ta.logged?r.alert(4,"You are already logged in."):(i.corp.logged?i.corp.logout():i.loyalty.logged&&i.loyalty.logout(),e&&n.post("ta="+e),e=r.app.uri.queryKey.affiliate,n.load("/agent/"+(e?"?affiliate="+e:""),a))},t.enable=function(e){var t=o(s);(t=t||dom.add("div",o("app-msg"),{id:s,className:"alert"})).innerHTML=e,t.style.display="block",document.body.classList.add("b2b"),document.body.classList.add("ta"),r.notify(1,"Welcome "+i.ta.name)},t.renderCheckout=function(){var e,t=o("sum-agent"),n=i.rate,a=i.getCurrencyFormat(i.rate.currency);i.ta.enabled&&0<n.commission?(e="",e=(e+='retail price: <span class="price right"><del>'+a.format(n.retail)+"</del></span>")+'<br>gross discount: <span class="price right">'+((n.commission+i.extras.commission)/(n.retail+i.extras.subtotal)*100).toFixed(2)+" %</span>",0<i.extras.commission&&(e=(e+='<br><br>stay margin: <span class="price right">'+a.format(n.commission)+"</span>")+'<br>extras margin: <span class="price right">'+a.format(i.extras.commission)+"</span>"),e+='<br>your total margin: <span class="price right">'+a.format(n.commission+i.extras.commission)+"</span>",r.$1("p",t).innerHTML=e,t.style.display="block"):t.style.display="none"},t.disable=function(){o(s).style.display="none",document.body.classList.remove("b2b"),document.body.classList.remove("ta"),r.notify(4,"You've been logged out.")},t.nationality=function(){n.load("/nationality",a)},e})(make,app),app.ui.ta=new App.UI.TravelAgent,App.UI.Corporate=(function(n,a){function e(){}var t=e.prototype,r=a.$,i=(n.modal,n.ajax),o="corp-msg";return t.login=function(e){1!==a.step&&a.setStep(1),a.corp.logged?n.alert(4,"You are already logged in."):(a.ta.logged?a.ta.logout():a.loyalty.logged&&a.loyalty.logout(),e&&i.post("corp="+e),i.load("/corp/","modal-corp"))},t.enable=function(e){var t=r(o);(t=t||dom.add("div",r("app-msg"),{id:o,className:"alert"})).innerHTML=e,t.style.display="block",document.body.classList.add("b2b"),document.body.classList.add("corp"),n.notify(1,"Welcome "+a.corp.name)},t.disable=function(){r(o).style.display="none",document.body.classList.remove("b2b"),document.body.classList.remove("corp"),n.notify(4,"You've been logged out.")},e})(make,app),app.ui.corp=new App.UI.Corporate,App.UI.Swipper=(function(){function e(){}var t=e.prototype,n=!1,a=!1,r=".swiper-container.gallery",i={},o=make.modal;function s(e){var t=o.top||"root",n=e.nextElementSibling.classList.contains("gallery-thumbs"),a=(n&&(i[t+"-thumbs"]=new Swiper(e.nextElementSibling,{spaceBetween:5,slidesPerView:2,loop:!1,freeMode:!0,loopedSlides:0,watchSlidesVisibility:!0,watchSlidesProgress:!0,preloadImages:!1,lazy:{loadPrevNext:!0,loadPrevNextAmount:5,loadOnTransitionStart:!0},breakpoints:{320:{slidesPerView:3},480:{slidesPerView:4},640:{slidesPerView:6},880:{slidesPerView:8}}})),{loop:!1,zoom:!0,preloadImages:!1,lazy:{loadPrevNext:!0,loadPrevNextAmount:3,loadOnTransitionStart:!0},grabCursor:!0,spaceBetween:0,loopedSlides:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0}});n&&(a.thumbs={swiper:i[t+"-thumbs"]}),i[t]=new Swiper(e,a)}function l(e){var t=i[e];t&&(t.destroy(),delete i[e])}return t.preload=function(){pageData.swiper&&loadJS(pageData.swiper,function(){var e;n=!0,a&&(a=!1,null!==(e=document.querySelector(r)))&&s(e)})},Behavior.addStatic(new BehaviorRule(function(e){e=e.querySelector(r);null!==e&&(n?s(e):a=!0)},function(e){null!==e.querySelector(r)&&(l(e=e.id||"root"),l(e+"-thumbs"))})),e})(),app.ui.swipper=new App.UI.Swipper,make.queue.add(app.ui.swipper.preload),make.boot(),make.wh=function(){var a=!1,r=!1,i=!1,o=!1,t=function(e,t,n){if("function"==typeof e)e();else if("string"==typeof e&&"config"===e)switch(t){case"cookie.consent":a?window.cookieConsentResolve():o=!0;break;case"avl.run":a?app.avl.run():r=!0;break;case"facebook.chat":a||(app.fb.initChat(n),i=!0);break;default:return}};window.wh.q.filter(function(e){return"string"==typeof e[0]}).forEach(function(e){t.apply(window,e)}),i&&cookieConsent.then(app.fb.load).catch(function(e){}),window.wh.q.filter(function(e){return"function"==typeof e[0]}).forEach(function(e){t.apply(window,e)}),r&&app.avl.run(),o&&window.cookieConsentResolve(),a=!0,window.wh=t};